// Copyright (c) 2025 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-accessor-array@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-accessor-getter@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-accessor-setter@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-getter@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-setter@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/array-dtype@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-typed-array-like@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-object-inverse@esm/index.mjs";import{enum as d}from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-dtypes@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-keys@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float32@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/array-uint8@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import{isPrimitive as h}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-promotion-rules@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-safe-casts@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-float32-ctor@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-float64-ctor@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-base-wrap-function@esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtypes2signatures@esm/index.mjs";import V from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-base-cast-return@esm/index.mjs";import S from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-complex128array@esm/index.mjs";import k from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-complex64array@esm/index.mjs";import U from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-booleanarray@esm/index.mjs";import F from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-arraylike2object@esm/index.mjs";import I from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-bytes-per-element@esm/index.mjs";import B from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import{isPrimitive as O}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer@esm/index.mjs";import D from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function-array@esm/index.mjs";import R from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import{ndarray as M}from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-gindex-of-row@esm/index.mjs";function P(r,n){return n>0?0:(1-r)*n}function A(r,n,t,e,a){var i,o,u,s,f,l,d,m,c,p,g;if(!((p=n[0])<=0))for(s=e[0],f=e[1],l=e[2],i=t[0],o=t[1],u=t[2],d=r[0],m=r[1],c=r[2],g=0;g<p;g++)c[l]=a(d[s],m[f]),s+=i,f+=o,l+=u}function C(r,n,t,e,a,i){var o,u,s,f,l,d,m,c,p,g,v,h,y,b;if(!((y=n[0])<=0))for(m=e[0],c=e[1],p=e[2],f=t[0],l=t[1],d=t[2],g=r[0],v=r[1],h=r[2],o=a[0],u=a[1],s=a[2],b=0;b<y;b++)s(h,p,i(o(g,m),u(v,c))),m+=f,c+=l,p+=d}function z(r,n,s,f){var l,d,m,c,p,g;return c=r[0],t(c)&&(l=e(u(c))),p=r[1],t(p)&&(d=e(u(p))),g=r[2],t(g)&&(m=a(u(g))),l||d||m?function(r,n,t,e,a){var i;return C(r,n,t,[P(i=n[0],t[0]),P(i,t[1]),P(i,t[2])],e,a)}(r,n,s,[l=l||i(u(c)),d=d||i(u(p)),m=m||o(u(g))],f):function(r,n,t,e){var a;return A(r,n,t,[P(a=n[0],t[0]),P(a,t[1]),P(a,t[2])],e)}(r,n,s,f)}n(z,"ndarray",(function(r,n,s,f,l){var d,m,c,p,g,v;return p=r[0],t(p)&&(d=e(u(p))),g=r[1],t(g)&&(m=e(u(g))),v=r[2],t(v)&&(c=a(u(v))),d||m||c?C(r,n,s,f,[d=d||i(u(p)),m=m||i(u(g)),c=c||o(u(v))],l):A(r,n,s,f,l)}));var L=["binary","bool","complex64","complex128","float32","float64","generic","int16","int32","int8","uint16","uint32","uint8","uint8c"];function N(){return L.slice()}var Y=d();function q(){return{bool:Y.bool,int8:Y.int8,uint8:Y.uint8,uint8c:Y.uint8c,int16:Y.int16,uint16:Y.uint16,int32:Y.int32,uint32:Y.uint32,int64:Y.int64,uint64:Y.uint64,float32:Y.float32,float64:Y.float64,complex64:Y.complex64,complex128:Y.complex128,binary:Y.binary,generic:Y.generic,notype:Y.notype,userdefined_type:Y.userdefined_type}}n(N,"enum",q),function(n,t){var e,a,i;for(e=m(t),i=0;i<e.length;i++)a=e[i],r(n,a,t[a])}(N,q());var G=l(q(),{duplicates:!1});function H(r){var n=G[r];return"string"==typeof n?n:null}var J=q();function K(r){var n=J[r];return"number"==typeof n?n:null}function Q(r){var n=typeof r;return"number"===n?H(r)?r:null:"string"===n?K(r):null}function W(r,n){return new c(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,2*(r.length-n))}function X(r,n){return new p(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,2*(r.length-n))}function Z(r,n){return new g(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,r.length-n)}var $=Q("complex64"),rr=Q("complex128"),nr=Q("bool");function tr(r,n){if(!s(r))throw new TypeError(v("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(v("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(t,e,a,i,o,u,s,l,d,m){var c,p,g;if(!f(a)||!f(u)||!f(d))return n(t,e,a,i,o,u,s,l,d,m),d;if(e=Q(e),o=Q(o),l=Q(l),null===e||null===o||null===l)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");c=e===$?W(a,0):e===rr?X(a,0):e===nr?Z(a,0):a;p=o===$?W(u,0):o===rr?X(u,0):o===nr?Z(u,0):u;g=l===$?W(d,0):l===rr?X(d,0):l===nr?Z(d,0):d;return r(t,e,c,i,o,p,s,l,g,m),d}}function er(r,n){return new r.constructor(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,r.length-n)}function ar(r,n,t){return r>0&&n<0&&(t+=(r-1)*n),t}var ir=Q("complex64"),or=Q("complex128"),ur=Q("bool");function sr(r){var n=typeof r;return"string"===n?null===K(r)?null:r:"number"===n?H(r):null}function fr(r,n){var t,e,a,i,o,u,s;for(e=r.length,a=n.length,t=[],s=0,o=0;o<e&&!(s>=a);o++)for(i=r[o],u=s;u<a;u++)if(i===n[u]){s=u+1,t.push(i);break}return t}function lr(r){var n,t,e;for(n=[],e=0;e<r.length;e++){if(null===(t=sr(r[e])))return new TypeError(v("invalid argument. Must provide recognized data types. Unable to resolve a data type string. Value: `%s`.",r[e]));n.push(t)}return n}function dr(r,n){var t;for(t=0;t<r.length;t++)if(r[t]===n)return!0;return!1}n(tr,"ndarray",(function(r,n){if(!s(r))throw new TypeError(v("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(v("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(t,e,a,i,o,u,s,l,d,m,c,p,g){var y,b,w;if(!f(a)||!f(s)||!f(c))return n(t,e,a,i,o,u,s,l,d,m,c,p,g),c;if(e=Q(e),u=Q(u),m=Q(m),null===e||null===u||null===m)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!h(o))throw new TypeError(v("invalid argument. First input array offset must be a nonnegative integer. Value: `%s`.",o));if(!h(d))throw new TypeError(v("invalid argument. Second input array offset must be a nonnegative integer. Value: `%s`.",d));if(!h(g))throw new TypeError(v("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",g));o=ar(t,i,o),d=ar(t,l,d),g=ar(t,p,g),y=e===ir?W(a,o):e===or?X(a,o):e===ur?Z(a,o):er(a,o);b=u===ir?W(s,d):u===or?X(s,d):u===ur?Z(s,d):er(s,d);w=m===ir?W(c,g):m===or?X(c,g):m===ur?Z(c,g):er(c,g);return r(t,e,y,i,u,b,l,m,w,p),c}}));var mr="complex64",cr="complex128",pr={complex64:w,complex128:j};function gr(r,n,t,e){return e===cr?n===mr?t===cr||t===mr?r[cr]:x(r[cr],2,pr[cr]):n===cr&&(t===cr||t===mr)?r[cr]:x(r[cr],2,pr[cr]):e===mr?n===cr?t===mr||t===cr?r[cr]:x(r[cr],2,pr[cr]):n===mr?t===cr?r[cr]:t===mr?r[mr]:x(r[mr],2,pr[mr]):t===cr?x(r[cr],2,pr[cr]):x(r[mr],2,pr[mr]):"generic"===e?n===cr?t===cr||t===mr?r[cr]:x(r[cr],2,pr[cr]):n===mr?t===mr?r[mr]:t===cr?r[cr]:x(r[mr],2,pr[mr]):t===cr?x(r[cr],2,pr[cr]):t===mr?x(r[mr],2,pr[mr]):r.default:r.default}function vr(r,n,t,e,a,i,o,u){var s,f,l;if(r<=0)return a;for(s=e,f=o,l=0;l<r;l++)a.set(u(n.get(s)),f),s+=t,f+=i;return a}function hr(r,n,t,e,a,i){return vr(r,n,t,P(r,t),e,a,P(r,a),i)}function yr(r,n,t,e,a,i,o,u){var s,f,l;if(r<=0)return a;for(s=e,f=o,l=0;l<r;l++)a[f]=u(n[s]),s+=t,f+=i;return a}function br(r,n,t,e,a,i){return yr(r,n,t,P(r,t),e,a,P(r,a),i)}function wr(r,n,t,e,a,i,o,u,s,f,l){var d,m,c,p;if(r<=0)return u;for(d=e,m=o,c=f,p=0;p<r;p++)u[c]=l(n[d],a[m]),d+=t,m+=i,c+=s;return u}function jr(r,n,t,e,a,i,o,u){return wr(r,n,t,P(r,t),e,a,P(r,a),i,o,P(r,o),u)}function xr(r,n,t,e,a,i,o,u,s,f,l){var d,m,c,p;if(r<=0)return u;for(d=e,m=o,c=f,p=0;p<r;p++)0===a[m]&&(u[c]=l(n[d])),d+=t,m+=i,c+=s;return u}function Er(r,n,t,e,a,i,o,u){return xr(r,n,t,P(r,t),e,a,P(r,a),i,o,P(r,o),u)}function Tr(r,n,t,e,a,i,o,u,s,f,l,d,m,c){var p,g,v,h,y;if(r<=0)return l;for(p=e,g=o,v=m,h=f,y=0;y<r;y++)0===u[h]&&(l[v]=c(n[p],a[g])),p+=t,g+=i,v+=d,h+=s;return l}function Vr(r,n,t,e,a,i,o,u,s,f){return Tr(r,n,t,P(r,t),e,a,P(r,a),i,o,P(r,o),u,s,P(r,s),f)}function Sr(r,n,t,e,a,i,o,u,s,f){var l,d,m,c;if(r<=0)return a;for(l=e,d=o,c=0;c<r;c++)void 0!==(m=s.call(f,n[l],c,[l,d],[n,a]))&&(a[d]=u(m)),l+=t,d+=i;return a}function kr(r,n,t,e,a,i,o,u,s,f,l,d){var m,c,p,g;if(r<=0)return i;for(m=e,c=u,g=0;g<r;g++)void 0!==(p=l.call(d,a(n,m),g,[m,c],[n,i]))&&s(i,c,f(p)),m+=t,c+=o;return i}function Ur(r,n,s,f,l,d,m,c){var p,g;return t(n)&&(p=e(u(n))),t(f)&&(g=a(u(f))),p||g?function(r,n,t,e,a,i,o,u,s,f){return kr(r,n,t,P(r,t),e,a,i,P(r,i),o,u,s,f)}(r,n,s,p=p||i(u(n)),f,l,g=g||o(u(f)),d,m,c):function(r,n,t,e,a,i,o,u){return Sr(r,n,t,P(r,t),e,a,P(r,a),i,o,u)}(r,n,s,f,l,d,m,c)}function Fr(r,n,t,e,a,i,o,u,s,f,l,d,m){var c,p,g,v,h;if(r<=0)return u;for(p=[e,o,f],g=[n,a,u],c=[0,0],h=0;h<r;h++)c[0]=n[p[0]],c[1]=a[p[1]],void 0!==(v=d.call(m,c,h,p,g))&&(u[p[2]]=l(v[0],v[1])),p[0]+=t,p[1]+=i,p[2]+=s;return u}function Ir(r,n,t,e,a,i,o,u,s,f,l,d,m,c,p,g){var v,h,y,b,w;if(r<=0)return f;for(h=[e,u,d],y=[n,i,f],v=[0,0],w=0;w<r;w++)v[0]=a(n,h[0]),v[1]=s(i,h[1]),void 0!==(b=p.call(g,v,w,h,y))&&m(f,h[2],c(b[0],b[1])),h[0]+=t,h[1]+=o,h[2]+=l;return f}function Br(r,n,s,f,l,d,m,c,p,g){var v,h,y;return t(n)&&(v=e(u(n))),t(f)&&(h=e(u(f))),t(d)&&(y=a(u(d))),v||h||y?function(r,n,t,e,a,i,o,u,s,f,l,d,m){return Ir(r,n,t,P(r,t),e,a,i,P(r,i),o,u,s,P(r,s),f,l,d,m)}(r,n,s,v=v||i(u(n)),f,l,h=h||i(u(f)),d,m,y=y||o(u(d)),c,p,g):function(r,n,t,e,a,i,o,u,s,f){return Fr(r,n,t,P(r,t),e,a,P(r,a),i,o,P(r,o),u,s,f)}(r,n,s,f,l,d,m,c,p,g)}function Or(r,n,t,e,a){var i,o,u,s,f,l,d,m,c,p,g;if(!((p=n[0])<=0))for(s=e[0],f=e[1],l=e[2],i=t[0],o=t[1],u=t[2],d=r[0],m=r[1],c=r[2],g=0;g<p;g++)0===m[f]&&(c[l]=a(d[s])),s+=i,f+=o,l+=u}function Dr(r,n,t,e,a,i){var o,u,s,f,l,d,m,c,p,g,v,h,y,b;if(!((y=n[0])<=0))for(m=e[0],c=e[1],p=e[2],f=t[0],l=t[1],d=t[2],g=r[0],v=r[1],h=r[2],o=a[0],u=a[1],s=a[2],b=0;b<y;b++)0===u(v,c)&&s(h,p,i(o(g,m))),m+=f,c+=l,p+=d}function Rr(r,n,s,f){var l,d,m,c,p,g;return c=r[0],t(c)&&(l=e(u(c))),p=r[1],t(p)&&(d=e(u(p))),g=r[2],t(g)&&(m=a(u(g))),l||d||m?function(r,n,t,e,a){var i;return Dr(r,n,t,[P(i=n[0],t[0]),P(i,t[1]),P(i,t[2])],e,a)}(r,n,s,[l=l||i(u(c)),d=d||i(u(p)),m=m||o(u(g))],f):function(r,n,t,e){var a;return Or(r,n,t,[P(a=n[0],t[0]),P(a,t[1]),P(a,t[2])],e)}(r,n,s,f)}n(hr,"ndarray",vr),n(br,"ndarray",yr),n(jr,"ndarray",wr),n(Er,"ndarray",xr),n(Vr,"ndarray",Tr),n(Ur,"ndarray",(function(r,n,s,f,l,d,m,c,p,g){var v,h;return t(n)&&(v=e(u(n))),t(l)&&(h=a(u(l))),v||h?kr(r,n,s,f,v=v||i(u(n)),l,d,m,h=h||o(u(l)),c,p,g):Sr(r,n,s,f,l,d,m,c,p,g)})),n(Br,"ndarray",(function(r,n,s,f,l,d,m,c,p,g,v,h,y){var b,w,j;return t(n)&&(b=e(u(n))),t(l)&&(w=e(u(l))),t(c)&&(j=a(u(c))),b||w||j?Ir(r,n,s,f,b=b||i(u(n)),l,d,m,w=w||i(u(l)),c,p,g,j=j||o(u(c)),v,h,y):Fr(r,n,s,f,l,d,m,c,p,g,v,h,y)})),n(Rr,"ndarray",(function(r,n,s,f,l){var d,m,c,p,g,v;return p=r[0],t(p)&&(d=e(u(p))),g=r[1],t(g)&&(m=e(u(g))),v=r[2],t(v)&&(c=a(u(v))),d||m||c?Dr(r,n,s,f,[d=d||i(u(p)),m=m||i(u(g)),c=c||o(u(v))],l):Or(r,n,s,f,l)}));var _r=Q("complex64"),Mr=Q("complex128"),Pr=Q("bool");function Ar(r,n){if(!s(r))throw new TypeError(v("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(v("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(t,e,a,i,o,u,s,l,d,m){var c,p;if(!f(a)||!f(d)||!f(u))return n(t,e,a,i,o,u,s,l,d,m),d;if(e=Q(e),l=Q(l),o=Q(o),null===e||null===l||null===o)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");c=e===_r?W(a,0):e===Mr?X(a,0):e===Pr?Z(a,0):a;p=l===_r?W(d,0):l===Mr?X(d,0):l===Pr?Z(d,0):d;return r(t,e,c,i,o,u,s,l,p,m),d}}var Cr=Q("complex64"),zr=Q("complex128"),Lr=Q("bool");function Nr(r,n){var t,e,a,i,o,u,s;for(e=r.length,a=n.length,t=[],s=0,o=0;o<e&&!(s>=a);o++)for(i=r[o],u=s;u<a;u++)if(i===n[u]){s=u+1,t.push(i);break}return t}function Yr(r){var n,t,e;for(n=[],e=0;e<r.length;e++){if(null===(t=sr(r[e])))return new TypeError(v("invalid argument. Must provide recognized data types. Unable to resolve a data type string. Value: `%s`.",r[e]));n.push(t)}return n}n(Ar,"ndarray",(function(r,n){if(!s(r))throw new TypeError(v("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(v("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(t,e,a,i,o,u,s,l,d,m,c,p,g){var y,b,w;if(!f(a)||!f(c)||!f(s))return n(t,e,a,i,o,u,s,l,d,m,c,p,g),c;if(e=Q(e),m=Q(m),u=Q(u),null===e||null===m||null===u)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!h(o))throw new TypeError(v("invalid argument. Input array offset must be a nonnegative integer. Value: `%s`.",o));if(!h(g))throw new TypeError(v("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",g));if(!h(d))throw new TypeError(v("invalid argument. Mask array offset must be a nonnegative integer. Value: `%s`.",d));o=ar(t,i,o),g=ar(t,p,g),d=ar(t,l,d),b=e===Cr?W(a,o):e===zr?X(a,o):e===Lr?Z(a,o):er(a,o);w=m===Cr?W(c,g):m===zr?X(c,g):m===Lr?Z(c,g):er(c,g);return y=er(s,d),r(t,e,b,i,u,y,l,m,w,p),c}}));var qr="complex64",Gr="complex128",Hr={complex64:w,complex128:j};function Jr(r,n,t){return t===Gr?n===qr||n===Gr?r[Gr]:V(r.default,1,Hr[t]):t===qr?n===qr?r[qr]:n===Gr?r[Gr]:V(r.default,1,Hr[t]):"generic"===t?n===Gr?r[Gr]:n===qr?r[qr]:r.default:r.default}function Kr(r,n,t,e,a){var i,o,u,s,f;if(!((s=n[0])<=0))for(o=e[0],i=t[0],u=r[0],f=0;f<s;f++)u[o]=a(),o+=i}function Qr(r,n,t,e,a,i){var o,u,s,f,l,d;if(!((l=n[0])<=0))for(s=e[0],u=t[0],f=r[0],o=a[0],d=0;d<l;d++)o(f,s,i()),s+=u}function Wr(r,n,e,i){var s,f;return f=r[0],t(f)&&(s=a(u(f))),s?function(r,n,t,e,a){return Qr(r,n,t,[P(n[0],t[0])],e,a)}(r,n,e,[s=s||o(u(f))],i):function(r,n,t,e){return Kr(r,n,t,[P(n[0],t[0])],e)}(r,n,e,i)}n(Wr,"ndarray",(function(r,n,e,i,s){var f,l;return l=r[0],t(l)&&(f=a(u(l))),f?Qr(r,n,e,i,[f=f||o(u(l))],s):Kr(r,n,e,i,s)}));var Xr=Q("complex64"),Zr=Q("complex128"),$r=Q("bool");function rn(r,n){if(!s(r))throw new TypeError(v("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(v("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(t,e,a,i){var o;if(!f(a))return n(t,e,a,i),a;if(null===(e=Q(e)))throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");o=e===Xr?W(a,0):e===Zr?X(a,0):e===$r?Z(a,0):a;return r(t,e,o,i),a}}var nn=Q("complex64"),tn=Q("complex128"),en=Q("bool");function an(r,n,t,e,a){var i,o,u,s,f,l,d,m,c,p,g,v,h,y,b,w,j;if(!((w=n[0])<=0))for(l=e[0],d=e[1],m=e[2],c=e[3],p=e[4],i=t[0],o=t[1],u=t[2],s=t[3],f=t[4],g=r[0],v=r[1],h=r[2],y=r[3],b=r[4],j=0;j<w;j++)b[p]=a(g[l],v[d],h[m],y[c]),l+=i,d+=o,m+=u,c+=s,p+=f}function on(r,n,t,e){var a;return an(r,n,t,[P(a=n[0],t[0]),P(a,t[1]),P(a,t[2]),P(a,t[3]),P(a,t[4])],e)}function un(r,n,t,e,a){var i,o,u,s,f,l,d,m,c,p,g,v,h,y,b,w,j,x,E,T;if(!((E=n[0])<=0))for(d=e[0],m=e[1],c=e[2],p=e[3],g=e[4],v=e[5],i=t[0],o=t[1],u=t[2],s=t[3],f=t[4],l=t[5],h=r[0],y=r[1],b=r[2],w=r[3],j=r[4],x=r[5],T=0;T<E;T++)x[v]=a(h[d],y[m],b[c],w[p],j[g]),d+=i,m+=o,c+=u,p+=s,g+=f,v+=l}function sn(r,n,t,e){var a;return un(r,n,t,[P(a=n[0],t[0]),P(a,t[1]),P(a,t[2]),P(a,t[3]),P(a,t[4]),P(a,t[5])],e)}n(rn,"ndarray",(function(r,n){if(!s(r))throw new TypeError(v("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(v("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(t,e,a,i,o){var u;if(!f(a))return n(t,e,a,i,o),a;if(null===(e=Q(e)))throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!h(o))throw new TypeError(v("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",o));o=ar(t,i,o),u=e===nn?W(a,o):e===tn?X(a,o):e===en?Z(a,o):er(a,o);return r(t,e,u,i),a}})),n(on,"ndarray",an),n(sn,"ndarray",un);var fn={float64:"getFloat64",float32:"getFloat32",float16:"getFloat16",int64:"getBigInt64",int32:"getInt32",int16:"getInt16",int8:"getInt8",uint64:"getBigUint64",uint32:"getUint32",uint16:"getUint16",uint8:"getUint8"};function ln(r,n,t,e,a,i,o,u,s){var f,l,d,m,c;for(m=fn[r],f=i.data,l=u,d=a,c=0;c<n;c++)f[l]=t[m](d,s),l+=o,d+=e}function dn(r,n,t,e,a,i,o,u,s){var f,l,d,m,c,p;for(c=fn[r],f=I(r),l=i.data,o*=2,d=u*=2,m=a,p=0;p<n;p++)l[d]=t[c](m,s),l[d+1]=t[c](m+f,s),d+=o,m+=e}function mn(r,n,t,e,a,i,o,u){var s;return r<=0?a:(s=F(a)).accessorProtocol?S(a)?(s.data=X(a,0),dn("float64",r,n,t,e,s,i,o,u),a):k(a)?(s.data=W(a,0),dn("float32",r,n,t,e,s,i,o,u),a):U(a)?(s.data=Z(a,0),ln("uint8",r,n,t,e,s,i,o,u),a):(function(r,n,t,e,a,i,o,u,s){var f,l,d,m,c,p;for(c=fn[r],f=i.data,l=i.accessors[1],d=u,m=a,p=0;p<n;p++)l(f,d,t[c](m,s)),d+=o,m+=e}("float64",r,n,t,e,s,i,o,u),a):(ln(null===s.dtype||"generic"===s.dtype?"float64":s.dtype,r,n,t,e,s,i,o,u),a)}function cn(r,n,t,e,a,i){return mn(r,n,t,P(r,t),e,a,P(r,a),i)}function pn(r,n,t,e,a,i,o,u){var s,f,l;if(r<=0)return a;for(s=e,f=o,l=0;l<r;l++)a[f]=u(n[s]),s+=t,f+=i;return a}function gn(r,n,t,e,a,i){return pn(r,n,t,P(r,t),e,a,P(r,a),i)}function vn(r,n,t,e,a,i,o,u,s,f,l){var d,m,c,p;if(r<=0)return u;for(d=e,m=o,c=f,p=0;p<r;p++)u[c]=l(n[d],a[m]),d+=t,m+=i,c+=s;return u}function hn(r,n,t,e,a,i,o,u){return vn(r,n,t,P(r,t),e,a,P(r,a),i,o,P(r,o),u)}function yn(r,n,t,e,a,i,o,u,s,f,l){var d,m,c,p;if(r<=0)return u;for(d=e,m=o,c=f,p=0;p<r;p++)0===a[m]&&(u[c]=l(n[d])),d+=t,m+=i,c+=s;return u}function bn(r,n,t,e,a,i,o,u){return yn(r,n,t,P(r,t),e,a,P(r,a),i,o,P(r,o),u)}function wn(r,n,t,e,a,i,o,u,s,f,l,d,m,c){var p,g,v,h,y;if(r<=0)return l;for(p=e,g=o,v=m,h=f,y=0;y<r;y++)0===u[h]&&(l[v]=c(n[p],a[g])),p+=t,g+=i,v+=d,h+=s;return l}function jn(r,n,t,e,a,i,o,u,s,f){return wn(r,n,t,P(r,t),e,a,P(r,a),i,o,P(r,o),u,s,P(r,s),f)}function xn(r,n,t,e,a){var i,o,u,s,f,l,d,m,c,p,g,v,h,y;if(!((h=n[0])<=0))for(f=e[0],l=e[1],d=e[2],m=e[3],i=t[0],o=t[1],u=t[2],s=t[3],c=r[0],p=r[1],g=r[2],v=r[3],y=0;y<h;y++)v[m]=a(c[f],p[l],g[d]),f+=i,l+=o,d+=u,m+=s}function En(r,n,t,e){var a;return xn(r,n,t,[P(a=n[0],t[0]),P(a,t[1]),P(a,t[2]),P(a,t[3])],e)}function Tn(r,n,t,e,a){var i,o,u,s,f,l,d,m;if(!((d=n[0])<=0))for(u=e[0],s=e[1],i=t[0],o=t[1],f=r[0],l=r[1],m=0;m<d;m++)l[s]=a(f[u]),u+=i,s+=o}function Vn(r,n,t,e,a,i){var o,u,s,f,l,d,m,c,p,g;if(!((p=n[0])<=0))for(l=e[0],d=e[1],s=t[0],f=t[1],m=r[0],c=r[1],o=a[0],u=a[1],g=0;g<p;g++)u(c,d,i(o(m,l))),l+=s,d+=f}function Sn(r,n,s,f){var l,d,m,c;return m=r[0],t(m)&&(l=e(u(m))),c=r[1],t(c)&&(d=a(u(c))),l||d?function(r,n,t,e,a){var i;return Vn(r,n,t,[P(i=n[0],t[0]),P(i,t[1])],e,a)}(r,n,s,[l=l||i(u(m)),d=d||o(u(c))],f):function(r,n,t,e){var a;return Tn(r,n,t,[P(a=n[0],t[0]),P(a,t[1])],e)}(r,n,s,f)}n(cn,"ndarray",mn),n(gn,"ndarray",pn),n(hn,"ndarray",vn),n(bn,"ndarray",yn),n(jn,"ndarray",wn),n(En,"ndarray",xn),n(Sn,"ndarray",(function(r,n,s,f,l){var d,m,c,p;return c=r[0],t(c)&&(d=e(u(c))),p=r[1],t(p)&&(m=a(u(p))),d||m?Vn(r,n,s,f,[d=d||i(u(c)),m=m||o(u(p))],l):Tn(r,n,s,f,l)}));var kn=Q("complex64"),Un=Q("complex128"),Fn=Q("bool");function In(r,n){if(!s(r))throw new TypeError(v("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(v("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(t,e,a,i,o,u,s){var l,d;if(!f(a)||!f(u))return n(t,e,a,i,o,u,s),u;if(e=Q(e),o=Q(o),null===e||null===o)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");l=e===kn?W(a,0):e===Un?X(a,0):e===Fn?Z(a,0):a;d=o===kn?W(u,0):o===Un?X(u,0):o===Fn?Z(u,0):u;return r(t,e,l,i,o,d,s),u}}var Bn=Q("complex64"),On=Q("complex128"),Dn=Q("bool");function Rn(r,n,t,e,a,i,o){var u,s,f,l,d,m,c,p,g;if(!((c=n[0])<=0))for(f=e[0],l=e[1],u=t[0],s=t[1],d=r[0],m=r[1],g=0;g<c;g++)void 0!==(p=i.call(o,d[f],g,[f,l],[d,m]))&&(m[l]=a(p)),f+=u,l+=s}function _n(r,n,t,e,a,i,o,u){var s,f,l,d,m,c,p,g,v,h,y;if(!((v=n[0])<=0))for(m=e[0],c=e[1],l=t[0],d=t[1],p=r[0],g=r[1],s=a[0],f=a[1],y=0;y<v;y++)void 0!==(h=o.call(u,s(p,m),y,[m,c],[p,g]))&&f(g,c,i(h)),m+=l,c+=d}function Mn(r,n,s,f,l){var d,m,c,p,g;return arguments.length>5&&(d=arguments[5]),p=r[0],t(p)&&(m=e(u(p))),g=r[1],t(g)&&(c=a(u(g))),m||c?function(r,n,t,e,a,i,o){var u;return _n(r,n,t,[P(u=n[0],t[0]),P(u,t[1])],e,a,i,o)}(r,n,s,[m=m||i(u(p)),c=c||o(u(g))],f,l,d):function(r,n,t,e,a,i){var o;return Rn(r,n,t,[P(o=n[0],t[0]),P(o,t[1])],e,a,i)}(r,n,s,f,l,d)}function Pn(r,n){var t,e,a,i,o,u,s;for(e=r.length,a=n.length,t=[],s=0,o=0;o<e&&!(s>=a);o++)for(i=r[o],u=s;u<a;u++)if(i===n[u]){s=u+1,t.push(i);break}return t}function An(r){var n,t,e;for(n=[],e=0;e<r.length;e++){if(null===(t=sr(r[e])))return new TypeError(v("invalid argument. Must provide recognized data types. Unable to resolve a data type string. Value: `%s`.",r[e]));n.push(t)}return n}n(In,"ndarray",(function(r,n){if(!s(r))throw new TypeError(v("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(v("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(t,e,a,i,o,u,s,l,d){var m,c;if(!f(a)||!f(s))return n(t,e,a,i,o,u,s,l,d),s;if(e=Q(e),u=Q(u),null===e||null===u)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!h(o))throw new TypeError(v("invalid argument. Input array offset must be a nonnegative integer. Value: `%s`.",o));if(!h(d))throw new TypeError(v("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",d));o=ar(t,i,o),d=ar(t,l,d),m=e===Bn?W(a,o):e===On?X(a,o):e===Dn?Z(a,o):er(a,o);c=u===Bn?W(s,d):u===On?X(s,d):u===Dn?Z(s,d):er(s,d);return r(t,e,m,i,u,c,l),s}})),n(Mn,"ndarray",(function(r,n,s,f,l,d){var m,c,p,g,v;return arguments.length>6&&(m=arguments[6]),g=r[0],t(g)&&(c=e(u(g))),v=r[1],t(v)&&(p=a(u(v))),c||p?_n(r,n,s,f,[c=c||i(u(g)),p=p||o(u(v))],l,d,m):Rn(r,n,s,f,l,d,m)}));var Cn="complex64",zn="complex128",Ln={complex64:w,complex128:j};function Nn(r,n,t){return t===zn?n===Cn||n===zn?r[zn]:V(r.default,1,Ln[t]):t===Cn?n===Cn?r[Cn]:n===zn?r[zn]:V(r.default,1,Ln[t]):"generic"===t?n===zn?r[zn]:n===Cn?r[Cn]:r.default:r.default}var Yn={float64:"setFloat64",float32:"setFloat32",float16:"setFloat16",int64:"setBigInt64",int32:"setInt32",int16:"setInt16",int8:"setInt8",uint64:"setBigUint64",uint32:"setUint32",uint16:"setUint16",uint8:"setUint8"};function qn(r,n,t,e,a,i,o,u,s){var f,l,d,m,c;for(m=Yn[r],f=t.data,l=a,d=u,c=0;c<n;c++)i[m](d,f[l],s),l+=e,d+=o;return i}function Gn(r,n,t,e,a,i,o,u,s){var f,l,d,m,c,p;for(c=Yn[r],f=I(r),l=t.data,e*=2,d=a*=2,m=u,p=0;p<n;p++)i[c](m,l[d],s),i[c](m+f,l[d+1],s),d+=e,m+=o;return i}function Hn(r,n,t,e,a,i,o,u){var s;return r<=0?a:(s=F(n)).accessorProtocol?S(n)?(s.data=X(n,0),Gn("float64",r,s,t,e,a,i,o,u)):k(n)?(s.data=W(n,0),Gn("float32",r,s,t,e,a,i,o,u)):U(n)?(s.data=Z(n,0),qn("uint8",r,s,t,e,a,i,o,u)):function(r,n,t,e,a,i,o,u,s){var f,l,d,m,c,p;for(c=Yn[r],f=t.data,l=t.accessors[0],d=a,m=u,p=0;p<n;p++)i[c](m,l(f,d),s),d+=e,m+=o;return i}("float64",r,s,t,e,a,i,o,u):qn(null===s.dtype||"generic"===s.dtype?"float64":s.dtype,r,s,t,e,a,i,o,u)}function Jn(r,n,t,e,a,i){return Hn(r,n,t,P(r,t),e,a,P(r,a),i)}function Kn(r,n,t,e,a,i,o,u){var s,f,l;if(r<=0)return a;for(s=e,f=o,l=0;l<r;l++)a.set(u(n.get(s)),f),s+=t,f+=i;return a}function Qn(r,n,t,e,a,i){return Kn(r,n,t,P(r,t),e,a,P(r,a),i)}n(Jn,"ndarray",Hn),n(Qn,"ndarray",Kn);var Wn={};function Xn(r,n,t,e,a,i){var o,u,f,l,d,m;if(s(r))m=r;else if(!D(r))throw new TypeError(v("invalid argument. First argument must be either a function or an array of functions. Value: `%s`.",r));if(!R(n))throw new TypeError(v("invalid argument. Second argument must be an array-like object. Value: `%s`.",n));if(!R(t)&&null!==t)throw new TypeError(v("invalid argument. Third argument must be an array-like object or null. Value: `%s`.",t));if(!B(e))throw new TypeError(v("invalid argument. Fourth argument must be a positive integer. Value: `%s`.",e));if(!h(a))throw new TypeError(v("invalid argument. Fifth argument must be a nonnegative integer. Value: `%s`.",a));if(!h(i))throw new TypeError(v("invalid argument. Sixth argument must be a nonnegative integer. Value: `%s`.",i));if(0===(f=a+i))throw new Error("invalid arguments. Interface must accept at least one strided input and/or output array. Based on the provided arguments, `nin+nout` equals `0`.");if(m){if(l=n.length/f,!O(l))throw new Error("invalid argument. Unexpected number of types. A type must be specified for each strided input and output array for each provided strided array function.")}else if(l=r.length,n.length!==l*f)throw new Error("invalid argument. Unexpected number of types. A type must be specified for each strided input and output array for each provided strided array function.");if(t&&t.length!==l)throw new Error("invalid argument. The third argument must have the same number of elements as the first argument.");if(3*f+1===e)u=!1;else{if(4*f+1!==e)throw new Error("invalid argument. Fourth argument is incompatible with the number of strided input and output arrays.");u=!0}return d=a*(o=u?4:3)+1,function(){var s,c,p,g,y,b,w,j,x,E,T,V;if(b=arguments.length,b!==e){if(b<e)throw new Error("invalid invocation. Insufficient arguments.");throw new Error("invalid invocation. Too many arguments.")}if(j=arguments[0],!O(j))throw new TypeError(v("invalid argument. First argument must be an integer. Value: `%s`.",j));for(y=[j],g=[],T=1;T<e;T+=o)g.push(arguments[T]);for(s=[],T=3;T<e;T+=o){if(!O(x=arguments[T]))throw T<d?new TypeError(v("invalid argument. Input array stride must be an integer. Value: `%s`.",x)):new TypeError(v("invalid argument. Output array stride must be an integer. Value: `%s`.",x));s.push(x)}if(u)for(c=[],T=4;T<e;T+=o){if(!h(x=arguments[T]))throw T<d?new TypeError(v("invalid argument. Input array offset must be a nonnegative integer. Value: `%s`.",x)):new TypeError(v("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",x));c.push(x)}for(p=[],T=2;T<e;T+=o){if(!R(x=arguments[T]))throw T<d?new TypeError(v("invalid argument. Input array must be an array-like object. Value: `%s`.",x)):new TypeError(v("invalid argument. Output array must be an array-like object. Value: `%s`.",x));if(V=(T-2)/o,u){if(w=c[V]+(j-1)*s[V],j>0&&(w<0||w>=x.length))throw T<d?new RangeError("invalid argument. Input array has insufficient elements based on the associated stride and the number of indexed elements."):new RangeError("invalid argument. Output array has insufficient elements based on the associated stride and the number of indexed elements.")}else if((j-1)*_(s[V])>=x.length)throw T<d?new RangeError("invalid argument. Input array has insufficient elements based on the associated stride and the number of indexed elements."):new RangeError("invalid argument. Output array has insufficient elements based on the associated stride and the number of indexed elements.");p.push(x)}if(w=M(l,f,n,f,1,0,g,1,0),w<0)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");E=m||r[w];t?u?E(p,y,s,c,t[w]):E(p,y,s,t[w]):u?E(p,y,s,c):E(p,y,s);if(1===i)return p[f-1];if(0===i)return;return p.slice(a)}}r(Wn,"binary",z),r(Wn,"binaryAddonDispatch",tr),r(Wn,"binaryDtypeSignatures",(function(r,n,t,e){var a,i,o,u,s,f,l,d,m,c,p,g,v,h,w,j,x;if(o=arguments.length>3?e:{},(f=lr(r))instanceof Error)throw f;if(n===r)l=f;else if((l=lr(n))instanceof Error)throw l;if(t===r)d=f;else if(t===n)d=l;else if((d=lr(t))instanceof Error)throw d;for(d.sort(),a={},v=f.length,h=l.length,s=[],w=0;w<v;w++)for(m=f[w],j=0;j<h;j++)if(c=l[j],-1!==(p=y(m,c))&&null!==p)for(dr(d,p)&&s.push(m,c,p),void 0===(i=a[p])&&(i=fr(d,(i=b(p)).sort()),a[p]=i),x=0;x<i.length;x++)(g=i[x])!==p&&s.push(m,c,g);if(o.enums){for(u=[],w=0;w<s.length;w++)u.push(Q(s[w]));s=u}return s})),r(Wn,"binarySignatureCallbacks",(function(r,n){var t,e,a,i,o;for(t=[],o=0;o<n.length;o+=3)e=sr(n[o]),a=sr(n[o+1]),i=sr(n[o+2]),t.push(gr(r,e,a,i));return t})),r(Wn,"cmap",hr),r(Wn,"dmap",br),r(Wn,"dmap2",jr),r(Wn,"dmskmap",Er),r(Wn,"dmskmap2",Vr),r(Wn,"dtypeEnum2Str",H),r(Wn,"dtypeResolveEnum",Q),r(Wn,"dtypeResolveStr",sr),r(Wn,"dtypeStr2Enum",K),r(Wn,"mapBy",Ur),r(Wn,"mapBy2",Br),r(Wn,"maxViewBufferIndex",(function(r,n,t){return r>0&&n>0&&(t+=(r-1)*n),t})),r(Wn,"metaDataProps",(function(r,t,e,a){return n(e,"nargs",a?r.nargs+r.nin+r.nout:r.nargs),n(e,"nin",r.nin),n(e,"nout",r.nout),E(e,"types",(function(){return T(t,r.nin,r.nout)})),e})),r(Wn,"minViewBufferIndex",ar),r(Wn,"mskunary",Rr),r(Wn,"mskunaryAddonDispatch",Ar),r(Wn,"mskunaryDtypeSignatures",(function(r,n,t){var e,a,i,o,u,s,f,l,d,m;if(a=arguments.length>2?t:{},(u=Yr(r))instanceof Error)throw u;if(n===r)s=u;else if((s=Yr(n))instanceof Error)throw s;for(s.sort(),l=u.length,o=[],d=0;d<l;d++)if(f=u[d],null!==(e=b(f)))for(e=Nr(s,e.sort()),m=0;m<e.length;m++)o.push(f,"uint8",e[m]);if(a.enums){for(i=[],d=0;d<o.length;d++)i.push(Q(o[d]));o=i}return o})),r(Wn,"mskunarySignatureCallbacks",(function(r,n){var t,e,a,i;for(t=[],i=0;i<n.length;i+=3)e=sr(n[i]),a=sr(n[i+2]),t.push(Jr(r,e,a));return t})),r(Wn,"nullary",Wr),r(Wn,"nullaryAddonDispatch",rn),r(Wn,"offsetView",er),r(Wn,"quaternary",on),r(Wn,"quinary",sn),r(Wn,"readDataView",cn),r(Wn,"reinterpretBoolean",Z),r(Wn,"reinterpretComplex",(function(r,n){if(S(r))return X(r,n);if(k(r))return W(r,n);throw new TypeError(v("invalid argument. First argument must be a complex-valued floating-point array. Value: `%s`.",r))})),r(Wn,"reinterpretComplex64",W),r(Wn,"reinterpretComplex128",X),r(Wn,"smap",gn),r(Wn,"smap2",hn),r(Wn,"smskmap",bn),r(Wn,"smskmap2",jn),r(Wn,"stride2offset",P),r(Wn,"strided2object",(function(r,n,t,e){var a=F(n);return a.length=r>0?r:0,a.stride=t,a.offset=e,a})),r(Wn,"ternary",En),r(Wn,"unary",Sn),r(Wn,"unaryAddonDispatch",In),r(Wn,"unaryBy",Mn),r(Wn,"unaryDtypeSignatures",(function(r,n,t){var e,a,i,o,u,s,f,l,d,m;if(a=arguments.length>2?t:{},(u=An(r))instanceof Error)throw u;if(n===r)s=u;else if((s=An(n))instanceof Error)throw s;for(s.sort(),l=u.length,o=[],d=0;d<l;d++)if(f=u[d],null!==(e=b(f)))for(e=Pn(s,e.sort()),m=0;m<e.length;m++)o.push(f,e[m]);if(a.enums){for(i=[],d=0;d<o.length;d++)i.push(Q(o[d]));o=i}return o})),r(Wn,"unarySignatureCallbacks",(function(r,n){var t,e,a,i;for(t=[],i=0;i<n.length;i+=2)e=sr(n[i]),a=sr(n[i+1]),t.push(Nn(r,e,a));return t})),r(Wn,"writeDataView",Jn),r(Wn,"zmap",Qn);var Zn={};r(Zn,"base",Wn),r(Zn,"dispatch",Xn),r(Zn,"dtypes",N);export{Wn as base,Zn as default,Xn as dispatch,N as dtypes};
//# sourceMappingURL=index.mjs.map
