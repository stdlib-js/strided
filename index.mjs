// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-typed-array-like@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-object-inverse@esm/index.mjs";import{enum as a}from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-dtypes@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-keys@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float32@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.0.3-esm/index.mjs";import{isPrimitive as l}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-promotion-rules@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-safe-casts@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-float32@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-float64@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-base-wrap-function@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtypes2signatures@esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-base-cast-return@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import{isPrimitive as b}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer@esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function-array@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";function T(r,n){return r[n]}function V(r,n){return r.get(n)}function S(r,n,e){r[n]=e}function k(r,n,e){r.set(e,n)}function F(r,n,e,t){var i,a,u,o,s,f;return(o=r[0]).get&&o.set&&(i=V),(s=r[1]).get&&s.set&&(a=V),(f=r[2]).get&&f.set&&(u=k),i||a||u?function(r,n,e,t,i){var a,u,o,s,f,l,d,m,p,c,g,v,h,y;if(!((h=n[0])<=0))for(d=(s=e[0])<0?(1-h)*s:0,m=(f=e[1])<0?(1-h)*f:0,p=(l=e[2])<0?(1-h)*l:0,c=r[0],g=r[1],v=r[2],a=t[0],u=t[1],o=t[2],y=0;y<h;y++)o(v,p,i(a(c,d),u(g,m))),d+=s,m+=f,p+=l}(r,n,e,[i=i||T,a=a||T,u=u||S],t):function(r,n,e,t){var i,a,u,o,s,f,l,d,m,p,c;if(!((p=n[0])<=0))for(o=(i=e[0])<0?(1-p)*i:0,s=(a=e[1])<0?(1-p)*a:0,f=(u=e[2])<0?(1-p)*u:0,l=r[0],d=r[1],m=r[2],c=0;c<p;c++)m[f]=t(l[o],d[s]),o+=i,s+=a,f+=u}(r,n,e,t)}n(F,"ndarray",(function(r,n,e,t,i){var a,u,o,s,f,l;return(s=r[0]).get&&s.set&&(a=V),(f=r[1]).get&&f.set&&(u=V),(l=r[2]).get&&l.set&&(o=k),a||u||o?function(r,n,e,t,i,a){var u,o,s,f,l,d,m,p,c,g,v,h,y,w;if(!((y=n[0])<=0))for(m=t[0],p=t[1],c=t[2],f=e[0],l=e[1],d=e[2],g=r[0],v=r[1],h=r[2],u=i[0],o=i[1],s=i[2],w=0;w<y;w++)s(h,c,a(u(g,m),o(v,p))),m+=f,p+=l,c+=d}(r,n,e,t,[a=a||T,u=u||T,o=o||S],i):function(r,n,e,t,i){var a,u,o,s,f,l,d,m,p,c,g;if(!((c=n[0])<=0))for(s=t[0],f=t[1],l=t[2],a=e[0],u=e[1],o=e[2],d=r[0],m=r[1],p=r[2],g=0;g<c;g++)p[l]=i(d[s],m[f]),s+=a,f+=u,l+=o}(r,n,e,t,i)}));var U=["binary","complex64","complex128","float32","float64","generic","int16","int32","int8","uint16","uint32","uint8","uint8c"];function O(){return U.slice()}var I=a();function R(){return{bool:I.bool,int8:I.int8,uint8:I.uint8,uint8c:I.uint8c,int16:I.int16,uint16:I.uint16,int32:I.int32,uint32:I.uint32,int64:I.int64,uint64:I.uint64,float32:I.float32,float64:I.float64,complex64:I.complex64,complex128:I.complex128,binary:I.binary,generic:I.generic,notype:I.notype,userdefined_type:I.userdefined_type}}n(O,"enum",R),function(n,e){var t,i,a;for(t=u(e),a=0;a<t.length;a++)i=t[a],r(n,i,e[i])}(O,R());var B=i(R(),{duplicates:!1});function D(r){var n=B[r];return"string"==typeof n?n:null}var _=R();function M(r){var n=_[r];return"number"==typeof n?n:null}function A(r){var n=typeof r;return"number"===n?D(r)?r:null:"string"===n?M(r):null}function C(r,n){return new o(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,2*(r.length-n))}function P(r,n){return new s(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,2*(r.length-n))}var z=A("complex64"),q=A("complex128");function L(r,n){if(!e(r))throw new TypeError(f("invalid argument. First argument must be a function. Value: `%s`.",r));if(!e(n))throw new TypeError(f("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,i,a,u,o,s,f,l,d,m){var p,c,g;if(!t(a)||!t(s)||!t(d))return n(e,i,a,u,o,s,f,l,d,m),d;if(i=A(i),o=A(o),l=A(l),null===i||null===o||null===l)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");p=i===z?C(a,0):i===q?P(a,0):a;c=o===z?C(s,0):o===q?P(s,0):s;g=l===z?C(d,0):l===q?P(d,0):d;return r(e,i,p,u,o,c,f,l,g,m),d}}function N(r,n){return new r.constructor(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,r.length-n)}function Y(r,n,e){return r>0&&n<0&&(e+=(r-1)*n),e}var G=A("complex64"),H=A("complex128");function J(r){var n=typeof r;return"string"===n?M(r)?r:null:"number"===n?D(r):null}function K(r,n){var e,t,i,a,u,o,s;for(t=r.length,i=n.length,e=[],s=0,u=0;u<t&&!(s>=i);u++)for(a=r[u],o=s;o<i;o++)if(a===n[o]){s=o+1,e.push(a);break}return e}function Q(r){var n,e,t;for(n=[],t=0;t<r.length;t++){if(null===(e=J(r[t])))return new TypeError(f("invalid argument. Must provide recognized data types. Unable to resolve a data type string. Value: `%s`.",r[t]));n.push(e)}return n}function W(r,n){var e;for(e=0;e<r.length;e++)if(r[e]===n)return!0;return!1}n(L,"ndarray",(function(r,n){if(!e(r))throw new TypeError(f("invalid argument. First argument must be a function. Value: `%s`.",r));if(!e(n))throw new TypeError(f("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,i,a,u,o,s,d,m,p,c,g,v,h){var y,w,b;if(!t(a)||!t(d)||!t(g))return n(e,i,a,u,o,s,d,m,p,c,g,v,h),g;if(i=A(i),s=A(s),c=A(c),null===i||null===s||null===c)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!l(o))throw new TypeError(f("invalid argument. First input array offset must be a nonnegative integer. Value: `%s`.",o));if(!l(p))throw new TypeError(f("invalid argument. Second input array offset must be a nonnegative integer. Value: `%s`.",p));if(!l(h))throw new TypeError(f("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",h));o=Y(e,u,o),p=Y(e,m,p),h=Y(e,v,h),y=i===G?C(a,o):i===H?P(a,o):N(a,o);w=s===G?C(d,p):s===H?P(d,p):N(d,p);b=c===G?C(g,h):c===H?P(g,h):N(g,h);return r(e,i,y,u,s,w,m,c,b,v),g}}));var X="complex64",Z="complex128",$={complex64:p,complex128:c};function rr(r,n,e,t){return t===Z?n===X?e===Z||e===X?r[Z]:g(r[Z],2,$[Z]):n===Z&&(e===Z||e===X)?r[Z]:g(r[Z],2,$[Z]):t===X?n===Z?e===X||e===Z?r[Z]:g(r[Z],2,$[Z]):n===X?e===Z?r[Z]:e===X?r[X]:g(r[X],2,$[X]):e===Z?g(r[Z],2,$[Z]):g(r[X],2,$[X]):"generic"===t?n===Z?e===Z||e===X?r[Z]:g(r[Z],2,$[Z]):n===X?e===X?r[X]:e===Z?r[Z]:g(r[X],2,$[X]):e===Z?g(r[Z],2,$[Z]):e===X?g(r[X],2,$[X]):r.default:r.default}function nr(r,n,e,t,i,a){var u,o,s;if(r<=0)return t;for(u=e<0?(1-r)*e:0,o=i<0?(1-r)*i:0,s=0;s<r;s++)t.set(a(n.get(u)),o),u+=e,o+=i;return t}function er(r,n,e,t,i,a){var u,o,s;if(r<=0)return t;for(u=e<0?(1-r)*e:0,o=i<0?(1-r)*i:0,s=0;s<r;s++)t[o]=a(n[u]),u+=e,o+=i;return t}function tr(r,n,e,t,i,a,u,o){var s,f,l,d;if(r<=0)return a;for(s=e<0?(1-r)*e:0,f=i<0?(1-r)*i:0,l=u<0?(1-r)*u:0,d=0;d<r;d++)a[l]=o(n[s],t[f]),s+=e,f+=i,l+=u;return a}function ir(r,n,e,t,i,a,u,o){var s,f,l,d;if(r<=0)return a;for(s=e<0?(1-r)*e:0,f=i<0?(1-r)*i:0,l=u<0?(1-r)*u:0,d=0;d<r;d++)0===t[f]&&(a[l]=o(n[s])),s+=e,f+=i,l+=u;return a}function ar(r,n,e,t,i,a,u,o,s,f){var l,d,m,p,c;if(r<=0)return o;for(l=e<0?(1-r)*e:0,d=i<0?(1-r)*i:0,m=s<0?(1-r)*s:0,p=u<0?(1-r)*u:0,c=0;c<r;c++)0===a[p]&&(o[m]=f(n[l],t[d])),l+=e,d+=i,m+=s,p+=u;return o}function ur(r,n,e,t,i,a,u,o){var s,f,l,d;if(r<=0)return t;for(s=e<0?(1-r)*e:0,f=i<0?(1-r)*i:0,d=0;d<r;d++)void 0!==(l=u.call(o,n[s],d,s,f,n,t))&&(t[f]=a(l)),s+=e,f+=i;return t}function or(r,n,e,t,i,a,u,o,s,f){var l,d,m,p,c;if(r<=0)return a;for(l=e<0?(1-r)*e:0,d=i<0?(1-r)*i:0,m=u<0?(1-r)*u:0,c=0;c<r;c++)void 0!==(p=s.call(f,n[l],t[d],c,l,d,m,n,t,a))&&(a[m]=o(p[0],p[1])),l+=e,d+=i,m+=u;return a}function sr(r,n){return r[n]}function fr(r,n){return r.get(n)}function lr(r,n,e){r[n]=e}function dr(r,n,e){r.set(e,n)}function mr(r,n,e,t){var i,a,u,o,s,f;return(o=r[0]).get&&o.set&&(i=fr),(s=r[1]).get&&s.set&&(a=fr),(f=r[2]).get&&f.set&&(u=dr),i||a||u?function(r,n,e,t,i){var a,u,o,s,f,l,d,m,p,c,g,v,h,y;if(!((h=n[0])<=0))for(d=(s=e[0])<0?(1-h)*s:0,m=(f=e[1])<0?(1-h)*f:0,p=(l=e[2])<0?(1-h)*l:0,c=r[0],g=r[1],v=r[2],a=t[0],u=t[1],o=t[2],y=0;y<h;y++)0===u(g,m)&&o(v,p,i(a(c,d))),d+=s,m+=f,p+=l}(r,n,e,[i=i||sr,a=a||sr,u=u||lr],t):function(r,n,e,t){var i,a,u,o,s,f,l,d,m,p,c;if(!((p=n[0])<=0))for(o=(i=e[0])<0?(1-p)*i:0,s=(a=e[1])<0?(1-p)*a:0,f=(u=e[2])<0?(1-p)*u:0,l=r[0],d=r[1],m=r[2],c=0;c<p;c++)0===d[s]&&(m[f]=t(l[o])),o+=i,s+=a,f+=u}(r,n,e,t)}n(nr,"ndarray",(function(r,n,e,t,i,a,u,o){var s,f,l;if(r<=0)return i;for(s=t,f=u,l=0;l<r;l++)i.set(o(n.get(s)),f),s+=e,f+=a;return i})),n(er,"ndarray",(function(r,n,e,t,i,a,u,o){var s,f,l;if(r<=0)return i;for(s=t,f=u,l=0;l<r;l++)i[f]=o(n[s]),s+=e,f+=a;return i})),n(tr,"ndarray",(function(r,n,e,t,i,a,u,o,s,f,l){var d,m,p,c;if(r<=0)return o;for(d=t,m=u,p=f,c=0;c<r;c++)o[p]=l(n[d],i[m]),d+=e,m+=a,p+=s;return o})),n(ir,"ndarray",(function(r,n,e,t,i,a,u,o,s,f,l){var d,m,p,c;if(r<=0)return o;for(d=t,m=u,p=f,c=0;c<r;c++)0===i[m]&&(o[p]=l(n[d])),d+=e,m+=a,p+=s;return o})),n(ar,"ndarray",(function(r,n,e,t,i,a,u,o,s,f,l,d,m,p){var c,g,v,h,y;if(r<=0)return l;for(c=t,g=u,v=m,h=f,y=0;y<r;y++)0===o[h]&&(l[v]=p(n[c],i[g])),c+=e,g+=a,v+=d,h+=s;return l})),n(ur,"ndarray",(function(r,n,e,t,i,a,u,o,s,f){var l,d,m,p;if(r<=0)return i;for(l=t,d=u,p=0;p<r;p++)void 0!==(m=s.call(f,n[l],p,l,d,n,i))&&(i[d]=o(m)),l+=e,d+=a;return i})),n(or,"ndarray",(function(r,n,e,t,i,a,u,o,s,f,l,d,m){var p,c,g,v,h;if(r<=0)return o;for(p=t,c=u,g=f,h=0;h<r;h++)void 0!==(v=d.call(m,n[p],i[c],h,p,c,g,n,i,o))&&(o[g]=l(v[0],v[1])),p+=e,c+=a,g+=s;return o})),n(mr,"ndarray",(function(r,n,e,t,i){var a,u,o,s,f,l;return(s=r[0]).get&&s.set&&(a=fr),(f=r[1]).get&&f.set&&(u=fr),(l=r[2]).get&&l.set&&(o=dr),a||u||o?function(r,n,e,t,i,a){var u,o,s,f,l,d,m,p,c,g,v,h,y,w;if(!((y=n[0])<=0))for(m=t[0],p=t[1],c=t[2],f=e[0],l=e[1],d=e[2],g=r[0],v=r[1],h=r[2],u=i[0],o=i[1],s=i[2],w=0;w<y;w++)0===o(v,p)&&s(h,c,a(u(g,m))),m+=f,p+=l,c+=d}(r,n,e,t,[a=a||sr,u=u||sr,o=o||lr],i):function(r,n,e,t,i){var a,u,o,s,f,l,d,m,p,c,g;if(!((c=n[0])<=0))for(s=t[0],f=t[1],l=t[2],a=e[0],u=e[1],o=e[2],d=r[0],m=r[1],p=r[2],g=0;g<c;g++)0===m[f]&&(p[l]=i(d[s])),s+=a,f+=u,l+=o}(r,n,e,t,i)}));var pr=A("complex64"),cr=A("complex128");function gr(r,n){if(!e(r))throw new TypeError(f("invalid argument. First argument must be a function. Value: `%s`.",r));if(!e(n))throw new TypeError(f("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,i,a,u,o,s,f,l,d,m){var p,c;if(!t(a)||!t(d)||!t(s))return n(e,i,a,u,o,s,f,l,d,m),d;if(i=A(i),l=A(l),o=A(o),null===i||null===l||null===o)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");p=i===pr?C(a,0):i===cr?P(a,0):a;c=l===pr?C(d,0):l===cr?P(d,0):d;return r(e,i,p,u,o,s,f,l,c,m),d}}var vr=A("complex64"),hr=A("complex128");function yr(r,n){var e,t,i,a,u,o,s;for(t=r.length,i=n.length,e=[],s=0,u=0;u<t&&!(s>=i);u++)for(a=r[u],o=s;o<i;o++)if(a===n[o]){s=o+1,e.push(a);break}return e}function wr(r){var n,e,t;for(n=[],t=0;t<r.length;t++){if(null===(e=J(r[t])))return new TypeError(f("invalid argument. Must provide recognized data types. Unable to resolve a data type string. Value: `%s`.",r[t]));n.push(e)}return n}n(gr,"ndarray",(function(r,n){if(!e(r))throw new TypeError(f("invalid argument. First argument must be a function. Value: `%s`.",r));if(!e(n))throw new TypeError(f("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,i,a,u,o,s,d,m,p,c,g,v,h){var y,w,b;if(!t(a)||!t(g)||!t(d))return n(e,i,a,u,o,s,d,m,p,c,g,v,h),g;if(i=A(i),c=A(c),s=A(s),null===i||null===c||null===s)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!l(o))throw new TypeError(f("invalid argument. Input array offset must be a nonnegative integer. Value: `%s`.",o));if(!l(h))throw new TypeError(f("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",h));if(!l(p))throw new TypeError(f("invalid argument. Mask array offset must be a nonnegative integer. Value: `%s`.",p));o=Y(e,u,o),h=Y(e,v,h),p=Y(e,m,p),w=i===vr?C(a,o):i===hr?P(a,o):N(a,o);b=c===vr?C(g,h):c===hr?P(g,h):N(g,h);return y=N(d,p),r(e,i,w,u,s,y,m,c,b,v),g}}));var br="complex64",Er="complex128",jr={complex64:p,complex128:c};function xr(r,n,e){return e===Er?n===br||n===Er?r[Er]:y(r.default,1,jr[e]):e===br?n===br?r[br]:n===Er?r[Er]:y(r.default,1,jr[e]):"generic"===e?n===Er?r[Er]:n===br?r[br]:r.default:r.default}function Tr(r,n,e,t){var i,a,u,o,s;if(!((o=n[0])<=0))for(a=(i=e[0])<0?(1-o)*i:0,u=r[0],s=0;s<o;s++)u[a]=t(),a+=i}n(Tr,"ndarray",(function(r,n,e,t,i){var a,u,o,s,f;if(!((s=n[0])<=0))for(u=t[0],a=e[0],o=r[0],f=0;f<s;f++)o[u]=i(),u+=a}));var Vr=A("complex64"),Sr=A("complex128");function kr(r,n){if(!e(r))throw new TypeError(f("invalid argument. First argument must be a function. Value: `%s`.",r));if(!e(n))throw new TypeError(f("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,i,a,u){var o;if(!t(a))return n(e,i,a,u),a;if(null===(i=A(i)))throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");o=i===Vr?C(a,0):i===Sr?P(a,0):a;return r(e,i,o,u),a}}var Fr=A("complex64"),Ur=A("complex128");function Or(r,n,e,t){var i,a,u,o,s,f,l,d,m,p,c,g,v,h,y,w,b;if(!((w=n[0])<=0))for(f=(i=e[0])<0?(1-w)*i:0,l=(a=e[1])<0?(1-w)*a:0,d=(u=e[2])<0?(1-w)*u:0,m=(o=e[3])<0?(1-w)*o:0,p=(s=e[4])<0?(1-w)*s:0,c=r[0],g=r[1],v=r[2],h=r[3],y=r[4],b=0;b<w;b++)y[p]=t(c[f],g[l],v[d],h[m]),f+=i,l+=a,d+=u,m+=o,p+=s}function Ir(r,n,e,t){var i,a,u,o,s,f,l,d,m,p,c,g,v,h,y,w,b,E,j,x;if(!((j=n[0])<=0))for(l=(i=e[0])<0?(1-j)*i:0,d=(a=e[1])<0?(1-j)*a:0,m=(u=e[2])<0?(1-j)*u:0,p=(o=e[3])<0?(1-j)*o:0,c=(s=e[4])<0?(1-j)*s:0,g=(f=e[5])<0?(1-j)*f:0,v=r[0],h=r[1],y=r[2],w=r[3],b=r[4],E=r[5],x=0;x<j;x++)E[g]=t(v[l],h[d],y[m],w[p],b[c]),l+=i,d+=a,m+=u,p+=o,c+=s,g+=f}function Rr(r,n,e,t,i,a){var u,o,s;if(r<=0)return t;for(u=e<0?(1-r)*e:0,o=i<0?(1-r)*i:0,s=0;s<r;s++)t[o]=a(n[u]),u+=e,o+=i;return t}function Br(r,n,e,t,i,a,u,o){var s,f,l,d;if(r<=0)return a;for(s=e<0?(1-r)*e:0,f=i<0?(1-r)*i:0,l=u<0?(1-r)*u:0,d=0;d<r;d++)a[l]=o(n[s],t[f]),s+=e,f+=i,l+=u;return a}function Dr(r,n,e,t,i,a,u,o){var s,f,l,d;if(r<=0)return a;for(s=e<0?(1-r)*e:0,f=i<0?(1-r)*i:0,l=u<0?(1-r)*u:0,d=0;d<r;d++)0===t[f]&&(a[l]=o(n[s])),s+=e,f+=i,l+=u;return a}function _r(r,n,e,t,i,a,u,o,s,f){var l,d,m,p,c;if(r<=0)return o;for(l=e<0?(1-r)*e:0,d=i<0?(1-r)*i:0,m=s<0?(1-r)*s:0,p=u<0?(1-r)*u:0,c=0;c<r;c++)0===a[p]&&(o[m]=f(n[l],t[d])),l+=e,d+=i,m+=s,p+=u;return o}function Mr(r,n,e,t){var i,a,u,o,s,f,l,d,m,p,c,g,v,h;if(!((v=n[0])<=0))for(s=(i=e[0])<0?(1-v)*i:0,f=(a=e[1])<0?(1-v)*a:0,l=(u=e[2])<0?(1-v)*u:0,d=(o=e[3])<0?(1-v)*o:0,m=r[0],p=r[1],c=r[2],g=r[3],h=0;h<v;h++)g[d]=t(m[s],p[f],c[l]),s+=i,f+=a,l+=u,d+=o}function Ar(r,n){return r[n]}function Cr(r,n){return r.get(n)}function Pr(r,n,e){r[n]=e}function zr(r,n,e){r.set(e,n)}function qr(r,n,e,t){var i,a,u,o;return(u=r[0]).get&&u.set&&(i=Cr),(o=r[1]).get&&o.set&&(a=zr),i||a?function(r,n,e,t,i){var a,u,o,s,f,l,d,m,p,c;if(!((p=n[0])<=0))for(f=(o=e[0])<0?(1-p)*o:0,l=(s=e[1])<0?(1-p)*s:0,d=r[0],m=r[1],a=t[0],u=t[1],c=0;c<p;c++)u(m,l,i(a(d,f))),f+=o,l+=s}(r,n,e,[i=i||Ar,a=a||Pr],t):function(r,n,e,t){var i,a,u,o,s,f,l,d;if(!((l=n[0])<=0))for(u=(i=e[0])<0?(1-l)*i:0,o=(a=e[1])<0?(1-l)*a:0,s=r[0],f=r[1],d=0;d<l;d++)f[o]=t(s[u]),u+=i,o+=a}(r,n,e,t)}n(kr,"ndarray",(function(r,n){if(!e(r))throw new TypeError(f("invalid argument. First argument must be a function. Value: `%s`.",r));if(!e(n))throw new TypeError(f("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,i,a,u,o){var s;if(!t(a))return n(e,i,a,u,o),a;if(null===(i=A(i)))throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!l(o))throw new TypeError(f("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",o));o=Y(e,u,o),s=i===Fr?C(a,o):i===Ur?P(a,o):N(a,o);return r(e,i,s,u),a}})),n(Or,"ndarray",(function(r,n,e,t,i){var a,u,o,s,f,l,d,m,p,c,g,v,h,y,w,b,E;if(!((b=n[0])<=0))for(l=t[0],d=t[1],m=t[2],p=t[3],c=t[4],a=e[0],u=e[1],o=e[2],s=e[3],f=e[4],g=r[0],v=r[1],h=r[2],y=r[3],w=r[4],E=0;E<b;E++)w[c]=i(g[l],v[d],h[m],y[p]),l+=a,d+=u,m+=o,p+=s,c+=f})),n(Ir,"ndarray",(function(r,n,e,t,i){var a,u,o,s,f,l,d,m,p,c,g,v,h,y,w,b,E,j,x,T;if(!((x=n[0])<=0))for(d=t[0],m=t[1],p=t[2],c=t[3],g=t[4],v=t[5],a=e[0],u=e[1],o=e[2],s=e[3],f=e[4],l=e[5],h=r[0],y=r[1],w=r[2],b=r[3],E=r[4],j=r[5],T=0;T<x;T++)j[v]=i(h[d],y[m],w[p],b[c],E[g]),d+=a,m+=u,p+=o,c+=s,g+=f,v+=l})),n(Rr,"ndarray",(function(r,n,e,t,i,a,u,o){var s,f,l;if(r<=0)return i;for(s=t,f=u,l=0;l<r;l++)i[f]=o(n[s]),s+=e,f+=a;return i})),n(Br,"ndarray",(function(r,n,e,t,i,a,u,o,s,f,l){var d,m,p,c;if(r<=0)return o;for(d=t,m=u,p=f,c=0;c<r;c++)o[p]=l(n[d],i[m]),d+=e,m+=a,p+=s;return o})),n(Dr,"ndarray",(function(r,n,e,t,i,a,u,o,s,f,l){var d,m,p,c;if(r<=0)return o;for(d=t,m=u,p=f,c=0;c<r;c++)0===i[m]&&(o[p]=l(n[d])),d+=e,m+=a,p+=s;return o})),n(_r,"ndarray",(function(r,n,e,t,i,a,u,o,s,f,l,d,m,p){var c,g,v,h,y;if(r<=0)return l;for(c=t,g=u,v=m,h=f,y=0;y<r;y++)0===o[h]&&(l[v]=p(n[c],i[g])),c+=e,g+=a,v+=d,h+=s;return l})),n(Mr,"ndarray",(function(r,n,e,t,i){var a,u,o,s,f,l,d,m,p,c,g,v,h,y;if(!((h=n[0])<=0))for(f=t[0],l=t[1],d=t[2],m=t[3],a=e[0],u=e[1],o=e[2],s=e[3],p=r[0],c=r[1],g=r[2],v=r[3],y=0;y<h;y++)v[m]=i(p[f],c[l],g[d]),f+=a,l+=u,d+=o,m+=s})),n(qr,"ndarray",(function(r,n,e,t,i){var a,u,o,s;return(o=r[0]).get&&o.set&&(a=Cr),(s=r[1]).get&&s.set&&(u=zr),a||u?function(r,n,e,t,i,a){var u,o,s,f,l,d,m,p,c,g;if(!((c=n[0])<=0))for(l=t[0],d=t[1],s=e[0],f=e[1],m=r[0],p=r[1],u=i[0],o=i[1],g=0;g<c;g++)o(p,d,a(u(m,l))),l+=s,d+=f}(r,n,e,t,[a=a||Ar,u=u||Pr],i):function(r,n,e,t,i){var a,u,o,s,f,l,d,m;if(!((d=n[0])<=0))for(o=t[0],s=t[1],a=e[0],u=e[1],f=r[0],l=r[1],m=0;m<d;m++)l[s]=i(f[o]),o+=a,s+=u}(r,n,e,t,i)}));var Lr=A("complex64"),Nr=A("complex128");function Yr(r,n){if(!e(r))throw new TypeError(f("invalid argument. First argument must be a function. Value: `%s`.",r));if(!e(n))throw new TypeError(f("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,i,a,u,o,s,f){var l,d;if(!t(a)||!t(s))return n(e,i,a,u,o,s,f),s;if(i=A(i),o=A(o),null===i||null===o)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");l=i===Lr?C(a,0):i===Nr?P(a,0):a;d=o===Lr?C(s,0):o===Nr?P(s,0):s;return r(e,i,l,u,o,d,f),s}}var Gr=A("complex64"),Hr=A("complex128");function Jr(r,n){var e,t,i,a,u,o,s;for(t=r.length,i=n.length,e=[],s=0,u=0;u<t&&!(s>=i);u++)for(a=r[u],o=s;o<i;o++)if(a===n[o]){s=o+1,e.push(a);break}return e}function Kr(r){var n,e,t;for(n=[],t=0;t<r.length;t++){if(null===(e=J(r[t])))return new TypeError(f("invalid argument. Must provide recognized data types. Unable to resolve a data type string. Value: `%s`.",r[t]));n.push(e)}return n}n(Yr,"ndarray",(function(r,n){if(!e(r))throw new TypeError(f("invalid argument. First argument must be a function. Value: `%s`.",r));if(!e(n))throw new TypeError(f("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,i,a,u,o,s,d,m,p){var c,g;if(!t(a)||!t(d))return n(e,i,a,u,o,s,d,m,p),d;if(i=A(i),s=A(s),null===i||null===s)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!l(o))throw new TypeError(f("invalid argument. Input array offset must be a nonnegative integer. Value: `%s`.",o));if(!l(p))throw new TypeError(f("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",p));o=Y(e,u,o),p=Y(e,m,p),c=i===Gr?C(a,o):i===Hr?P(a,o):N(a,o);g=s===Gr?C(d,p):s===Hr?P(d,p):N(d,p);return r(e,i,c,u,s,g,m),d}}));var Qr="complex64",Wr="complex128",Xr={complex64:p,complex128:c};function Zr(r,n,e){return e===Wr?n===Qr||n===Wr?r[Wr]:y(r.default,1,Xr[e]):e===Qr?n===Qr?r[Qr]:n===Wr?r[Wr]:y(r.default,1,Xr[e]):"generic"===e?n===Wr?r[Wr]:n===Qr?r[Qr]:r.default:r.default}function $r(r,n,e,t,i,a){var u,o,s;if(r<=0)return t;for(u=e<0?(1-r)*e:0,o=i<0?(1-r)*i:0,s=0;s<r;s++)t.set(a(n.get(u)),o),u+=e,o+=i;return t}n($r,"ndarray",(function(r,n,e,t,i,a,u,o){var s,f,l;if(r<=0)return i;for(s=t,f=u,l=0;l<r;l++)i.set(o(n.get(s)),f),s+=e,f+=a;return i}));var rn={};function nn(r,n,e,t,i,a,u,o,s){var f,l,d,m;for(f=a,d=0;d<r;d++){for(l=s,m=0;m<n&&e[f+m*i]===u[l];m++)l+=o;if(m===n)return d;f+=t}return-1}function en(r,n,t,i,a,u){var o,s,d,m,p,c;if(e(r))c=r;else if(!E(r))throw new TypeError(f("invalid argument. First argument must be either a function or an array of functions. Value: `%s`.",r));if(!j(n))throw new TypeError(f("invalid argument. Second argument must be an array-like object. Value: `%s`.",n));if(!j(t)&&null!==t)throw new TypeError(f("invalid argument. Third argument must be an array-like object or null. Value: `%s`.",t));if(!w(i))throw new TypeError(f("invalid argument. Fourth argument must be a positive integer. Value: `%s`.",i));if(!l(a))throw new TypeError(f("invalid argument. Fifth argument must be a nonnegative integer. Value: `%s`.",a));if(!l(u))throw new TypeError(f("invalid argument. Sixth argument must be a nonnegative integer. Value: `%s`.",u));if(0===(d=a+u))throw new Error("invalid arguments. Interface must accept at least one strided input and/or output array. Based on the provided arguments, `nin+nout` equals `0`.");if(c){if(m=n.length/d,!b(m))throw new Error("invalid argument. Unexpected number of types. A type must be specified for each strided input and output array for each provided strided array function.")}else if(m=r.length,n.length!==m*d)throw new Error("invalid argument. Unexpected number of types. A type must be specified for each strided input and output array for each provided strided array function.");if(t&&t.length!==m)throw new Error("invalid argument. The third argument must have the same number of elements as the first argument.");if(3*d+1===i)s=!1;else{if(4*d+1!==i)throw new Error("invalid argument. Fourth argument is incompatible with the number of strided input and output arrays.");s=!0}return p=a*(o=s?4:3)+1,function(){var e,g,v,h,y,w,E,T,V,S,k,F;if((w=arguments.length)!==i){if(w<i)throw new Error("invalid invocation. Insufficient arguments.");throw new Error("invalid invocation. Too many arguments.")}if(!b(T=arguments[0]))throw new TypeError(f("invalid argument. First argument must be an integer. Value: `%s`.",T));for(y=[T],h=[],k=1;k<i;k+=o)h.push(arguments[k]);for(e=[],k=3;k<i;k+=o){if(!b(V=arguments[k]))throw k<p?new TypeError(f("invalid argument. Input array stride must be an integer. Value: `%s`.",V)):new TypeError(f("invalid argument. Output array stride must be an integer. Value: `%s`.",V));e.push(V)}if(s)for(g=[],k=4;k<i;k+=o){if(!l(V=arguments[k]))throw k<p?new TypeError(f("invalid argument. Input array offset must be a nonnegative integer. Value: `%s`.",V)):new TypeError(f("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",V));g.push(V)}for(v=[],k=2;k<i;k+=o){if(!j(V=arguments[k]))throw k<p?new TypeError(f("invalid argument. Input array must be an array-like object. Value: `%s`.",V)):new TypeError(f("invalid argument. Output array must be an array-like object. Value: `%s`.",V));if(F=(k-2)/o,s){if(E=g[F]+(T-1)*e[F],T>0&&(E<0||E>=V.length))throw k<p?new RangeError("invalid argument. Input array has insufficient elements based on the associated stride and the number of indexed elements."):new RangeError("invalid argument. Output array has insufficient elements based on the associated stride and the number of indexed elements.")}else if((T-1)*x(e[F])>=V.length)throw k<p?new RangeError("invalid argument. Input array has insufficient elements based on the associated stride and the number of indexed elements."):new RangeError("invalid argument. Output array has insufficient elements based on the associated stride and the number of indexed elements.");v.push(V)}if((E=nn(m,d,n,d,1,0,h,1,0))<0)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");S=c||r[E];t?s?S(v,y,e,g,t[E]):S(v,y,e,t[E]):s?S(v,y,e,g):S(v,y,e);if(1===u)return v[d-1];if(0===u)return;return v.slice(a)}}r(rn,"binary",F),r(rn,"binaryAddonDispatch",L),r(rn,"binaryDtypeSignatures",(function(r,n,e,t){var i,a,u,o,s,f,l,p,c,g,v,h,y,w,b,E,j;if(u=arguments.length>3?t:{},(f=Q(r))instanceof Error)throw f;if(n===r)l=f;else if((l=Q(n))instanceof Error)throw l;if(e===r)p=f;else if(e===n)p=l;else if((p=Q(e))instanceof Error)throw p;for(p.sort(),i={},y=f.length,w=l.length,s=[],b=0;b<y;b++)for(c=f[b],E=0;E<w;E++)if(g=l[E],-1!==(v=d(c,g))&&null!==v)for(W(p,v)&&s.push(c,g,v),void 0===(a=i[v])&&(a=K(p,(a=m(v)).sort()),i[v]=a),j=0;j<a.length;j++)(h=a[j])!==v&&s.push(c,g,h);if(u.enums){for(o=[],b=0;b<s.length;b++)o.push(A(s[b]));s=o}return s})),r(rn,"binarySignatureCallbacks",(function(r,n){var e,t,i,a,u;for(e=[],u=0;u<n.length;u+=3)t=J(n[u]),i=J(n[u+1]),a=J(n[u+2]),e.push(rr(r,t,i,a));return e})),r(rn,"cmap",nr),r(rn,"dmap",er),r(rn,"dmap2",tr),r(rn,"dmskmap",ir),r(rn,"dmskmap2",ar),r(rn,"dtypeEnum2Str",D),r(rn,"dtypeResolveEnum",A),r(rn,"dtypeResolveStr",J),r(rn,"dtypeStr2Enum",M),r(rn,"mapBy",ur),r(rn,"mapBy2",or),r(rn,"maxViewBufferIndex",(function(r,n,e){return r>0&&n>0&&(e+=(r-1)*n),e})),r(rn,"metaDataProps",(function(r,e,t,i){return n(t,"nargs",i?r.nargs+r.nin+r.nout:r.nargs),n(t,"nin",r.nin),n(t,"nout",r.nout),v(t,"types",(function(){return h(e,r.nin,r.nout)})),t})),r(rn,"minViewBufferIndex",Y),r(rn,"mskunary",mr),r(rn,"mskunaryAddonDispatch",gr),r(rn,"mskunaryDtypeSignatures",(function(r,n,e){var t,i,a,u,o,s,f,l,d,p;if(i=arguments.length>2?e:{},(o=wr(r))instanceof Error)throw o;if(n===r)s=o;else if((s=wr(n))instanceof Error)throw s;for(s.sort(),l=o.length,u=[],d=0;d<l;d++)if(f=o[d],null!==(t=m(f)))for(t=yr(s,t.sort()),p=0;p<t.length;p++)u.push(f,"uint8",t[p]);if(i.enums){for(a=[],d=0;d<u.length;d++)a.push(A(u[d]));u=a}return u})),r(rn,"mskunarySignatureCallbacks",(function(r,n){var e,t,i,a;for(e=[],a=0;a<n.length;a+=3)t=J(n[a]),i=J(n[a+2]),e.push(xr(r,t,i));return e})),r(rn,"nullary",Tr),r(rn,"nullaryAddonDispatch",kr),r(rn,"offsetView",N),r(rn,"quaternary",Or),r(rn,"quinary",Ir),r(rn,"reinterpretComplex64",C),r(rn,"reinterpretComplex128",P),r(rn,"smap",Rr),r(rn,"smap2",Br),r(rn,"smskmap",Dr),r(rn,"smskmap2",_r),r(rn,"ternary",Mr),r(rn,"unary",qr),r(rn,"unaryAddonDispatch",Yr),r(rn,"unaryDtypeSignatures",(function(r,n,e){var t,i,a,u,o,s,f,l,d,p;if(i=arguments.length>2?e:{},(o=Kr(r))instanceof Error)throw o;if(n===r)s=o;else if((s=Kr(n))instanceof Error)throw s;for(s.sort(),l=o.length,u=[],d=0;d<l;d++)if(f=o[d],null!==(t=m(f)))for(t=Jr(s,t.sort()),p=0;p<t.length;p++)u.push(f,t[p]);if(i.enums){for(a=[],d=0;d<u.length;d++)a.push(A(u[d]));u=a}return u})),r(rn,"unarySignatureCallbacks",(function(r,n){var e,t,i,a;for(e=[],a=0;a<n.length;a+=2)t=J(n[a]),i=J(n[a+1]),e.push(Zr(r,t,i));return e})),r(rn,"zmap",$r);var tn={};r(tn,"base",rn),r(tn,"dispatch",en),r(tn,"dtypes",O);export{rn as base,tn as default,en as dispatch,O as dtypes};
//# sourceMappingURL=index.mjs.map
