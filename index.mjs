// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@v0.2.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.1-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-accessor-array@v0.2.2-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-accessor-getter@v0.2.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-accessor-setter@v0.2.2-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-getter@v0.2.2-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-setter@v0.2.2-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/array-dtype@v0.3.0-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@v0.2.2-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-typed-array-like@v0.2.2-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-object-inverse@v0.2.2-esm/index.mjs";import{enum as d}from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-dtypes@v0.3.0-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-keys@v0.2.2-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float32@v0.2.2-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@v0.2.2-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/array-uint8@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.2.2-esm/index.mjs";import{isPrimitive as h}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@v0.2.2-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-promotion-rules@v0.3.0-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-safe-casts@v0.3.0-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-float32-ctor@v0.0.2-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-float64-ctor@v0.0.3-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-base-wrap-function@v0.2.2-esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtypes2signatures@esm/index.mjs";import V from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-safe-casts@esm/index.mjs";import S from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-float32-ctor@esm/index.mjs";import k from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-float64-ctor@esm/index.mjs";import F from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-base-cast-return@esm/index.mjs";import U from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-complex128array@v0.2.2-esm/index.mjs";import O from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-complex64array@v0.2.2-esm/index.mjs";import B from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@v0.2.2-esm/index.mjs";import{isPrimitive as I}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer@v0.2.2-esm/index.mjs";import R from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function-array@v0.2.2-esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.2.2-esm/index.mjs";import D from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@v0.2.2-esm/index.mjs";function M(r,n){return n>0?0:(1-r)*n}function A(r,n,e,t,i){var a,o,u,s,f,l,d,m,p,c,v;if(!((c=n[0])<=0))for(s=t[0],f=t[1],l=t[2],a=e[0],o=e[1],u=e[2],d=r[0],m=r[1],p=r[2],v=0;v<c;v++)p[l]=i(d[s],m[f]),s+=a,f+=o,l+=u}function C(r,n,e,t,i,a){var o,u,s,f,l,d,m,p,c,v,g,h,y,b;if(!((y=n[0])<=0))for(m=t[0],p=t[1],c=t[2],f=e[0],l=e[1],d=e[2],v=r[0],g=r[1],h=r[2],o=i[0],u=i[1],s=i[2],b=0;b<y;b++)s(h,c,a(o(v,m),u(g,p))),m+=f,p+=l,c+=d}function P(r,n,s,f){var l,d,m,p,c,v;return p=r[0],e(p)&&(l=t(u(p))),c=r[1],e(c)&&(d=t(u(c))),v=r[2],e(v)&&(m=i(u(v))),l||d||m?function(r,n,e,t,i){var a;return C(r,n,e,[M(a=n[0],e[0]),M(a,e[1]),M(a,e[2])],t,i)}(r,n,s,[l=l||a(u(p)),d=d||a(u(c)),m=m||o(u(v))],f):function(r,n,e,t){var i;return A(r,n,e,[M(i=n[0],e[0]),M(i,e[1]),M(i,e[2])],t)}(r,n,s,f)}n(P,"ndarray",(function(r,n,s,f,l){var d,m,p,c,v,g;return c=r[0],e(c)&&(d=t(u(c))),v=r[1],e(v)&&(m=t(u(v))),g=r[2],e(g)&&(p=i(u(g))),d||m||p?C(r,n,s,f,[d=d||a(u(c)),m=m||a(u(v)),p=p||o(u(g))],l):A(r,n,s,f,l)}));var z=["binary","bool","complex64","complex128","float32","float64","generic","int16","int32","int8","uint16","uint32","uint8","uint8c"];function L(){return z.slice()}var N=d();function Y(){return{bool:N.bool,int8:N.int8,uint8:N.uint8,uint8c:N.uint8c,int16:N.int16,uint16:N.uint16,int32:N.int32,uint32:N.uint32,int64:N.int64,uint64:N.uint64,float32:N.float32,float64:N.float64,complex64:N.complex64,complex128:N.complex128,binary:N.binary,generic:N.generic,notype:N.notype,userdefined_type:N.userdefined_type}}n(L,"enum",Y),function(n,e){var t,i,a;for(t=m(e),a=0;a<t.length;a++)i=t[a],r(n,i,e[i])}(L,Y());var q=l(Y(),{duplicates:!1});function G(r){var n=q[r];return"string"==typeof n?n:null}var H=Y();function J(r){var n=H[r];return"number"==typeof n?n:null}function K(r){var n=typeof r;return"number"===n?G(r)?r:null:"string"===n?J(r):null}function Q(r,n){return new p(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,2*(r.length-n))}function W(r,n){return new c(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,2*(r.length-n))}function X(r,n){return new v(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,r.length-n)}var Z=K("complex64"),$=K("complex128"),rr=K("bool");function nr(r,n){if(!s(r))throw new TypeError(g("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(g("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,t,i,a,o,u,s,l,d,m){var p,c,v;if(!f(i)||!f(u)||!f(d))return n(e,t,i,a,o,u,s,l,d,m),d;if(t=K(t),o=K(o),l=K(l),null===t||null===o||null===l)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");p=t===Z?Q(i,0):t===$?W(i,0):t===rr?X(i,0):i;c=o===Z?Q(u,0):o===$?W(u,0):o===rr?X(u,0):u;v=l===Z?Q(d,0):l===$?W(d,0):l===rr?X(d,0):d;return r(e,t,p,a,o,c,s,l,v,m),d}}function er(r,n){return new r.constructor(r.buffer,r.byteOffset+r.BYTES_PER_ELEMENT*n,r.length-n)}function tr(r,n,e){return r>0&&n<0&&(e+=(r-1)*n),e}var ir=K("complex64"),ar=K("complex128"),or=K("bool");function ur(r){var n=typeof r;return"string"===n?null===J(r)?null:r:"number"===n?G(r):null}function sr(r,n){var e,t,i,a,o,u,s;for(t=r.length,i=n.length,e=[],s=0,o=0;o<t&&!(s>=i);o++)for(a=r[o],u=s;u<i;u++)if(a===n[u]){s=u+1,e.push(a);break}return e}function fr(r){var n,e,t;for(n=[],t=0;t<r.length;t++){if(null===(e=ur(r[t])))return new TypeError(g("invalid argument. Must provide recognized data types. Unable to resolve a data type string. Value: `%s`.",r[t]));n.push(e)}return n}function lr(r,n){var e;for(e=0;e<r.length;e++)if(r[e]===n)return!0;return!1}n(nr,"ndarray",(function(r,n){if(!s(r))throw new TypeError(g("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(g("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,t,i,a,o,u,s,l,d,m,p,c,v){var y,b,w;if(!f(i)||!f(s)||!f(p))return n(e,t,i,a,o,u,s,l,d,m,p,c,v),p;if(t=K(t),u=K(u),m=K(m),null===t||null===u||null===m)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!h(o))throw new TypeError(g("invalid argument. First input array offset must be a nonnegative integer. Value: `%s`.",o));if(!h(d))throw new TypeError(g("invalid argument. Second input array offset must be a nonnegative integer. Value: `%s`.",d));if(!h(v))throw new TypeError(g("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",v));o=tr(e,a,o),d=tr(e,l,d),v=tr(e,c,v),y=t===ir?Q(i,o):t===ar?W(i,o):t===or?X(i,o):er(i,o);b=u===ir?Q(s,d):u===ar?W(s,d):u===or?X(s,d):er(s,d);w=m===ir?Q(p,v):m===ar?W(p,v):m===or?X(p,v):er(p,v);return r(e,t,y,a,u,b,l,m,w,c),p}}));var dr="complex64",mr="complex128",pr={complex64:w,complex128:j};function cr(r,n,e,t){return t===mr?n===dr?e===mr||e===dr?r[mr]:x(r[mr],2,pr[mr]):n===mr&&(e===mr||e===dr)?r[mr]:x(r[mr],2,pr[mr]):t===dr?n===mr?e===dr||e===mr?r[mr]:x(r[mr],2,pr[mr]):n===dr?e===mr?r[mr]:e===dr?r[dr]:x(r[dr],2,pr[dr]):e===mr?x(r[mr],2,pr[mr]):x(r[dr],2,pr[dr]):"generic"===t?n===mr?e===mr||e===dr?r[mr]:x(r[mr],2,pr[mr]):n===dr?e===dr?r[dr]:e===mr?r[mr]:x(r[dr],2,pr[dr]):e===mr?x(r[mr],2,pr[mr]):e===dr?x(r[dr],2,pr[dr]):r.default:r.default}function vr(r,n,e,t,i,a,o,u){var s,f,l;if(r<=0)return i;for(s=t,f=o,l=0;l<r;l++)i.set(u(n.get(s)),f),s+=e,f+=a;return i}function gr(r,n,e,t,i,a){return vr(r,n,e,M(r,e),t,i,M(r,i),a)}function hr(r,n,e,t,i,a,o,u){var s,f,l;if(r<=0)return i;for(s=t,f=o,l=0;l<r;l++)i[f]=u(n[s]),s+=e,f+=a;return i}function yr(r,n,e,t,i,a){return hr(r,n,e,M(r,e),t,i,M(r,i),a)}function br(r,n,e,t,i,a,o,u,s,f,l){var d,m,p,c;if(r<=0)return u;for(d=t,m=o,p=f,c=0;c<r;c++)u[p]=l(n[d],i[m]),d+=e,m+=a,p+=s;return u}function wr(r,n,e,t,i,a,o,u){return br(r,n,e,M(r,e),t,i,M(r,i),a,o,M(r,o),u)}function jr(r,n,e,t,i,a,o,u,s,f,l){var d,m,p,c;if(r<=0)return u;for(d=t,m=o,p=f,c=0;c<r;c++)0===i[m]&&(u[p]=l(n[d])),d+=e,m+=a,p+=s;return u}function xr(r,n,e,t,i,a,o,u){return jr(r,n,e,M(r,e),t,i,M(r,i),a,o,M(r,o),u)}function Er(r,n,e,t,i,a,o,u,s,f,l,d,m,p){var c,v,g,h,y;if(r<=0)return l;for(c=t,v=o,g=m,h=f,y=0;y<r;y++)0===u[h]&&(l[g]=p(n[c],i[v])),c+=e,v+=a,g+=d,h+=s;return l}function Tr(r,n,e,t,i,a,o,u,s,f){return Er(r,n,e,M(r,e),t,i,M(r,i),a,o,M(r,o),u,s,M(r,s),f)}function Vr(r,n,e,t,i,a,o,u,s,f){var l,d,m,p;if(r<=0)return i;for(l=t,d=o,p=0;p<r;p++)void 0!==(m=s.call(f,n[l],p,[l,d],[n,i]))&&(i[d]=u(m)),l+=e,d+=a;return i}function Sr(r,n,e,t,i,a,o,u,s,f,l,d){var m,p,c,v;if(r<=0)return a;for(m=t,p=u,v=0;v<r;v++)void 0!==(c=l.call(d,i(n,m),v,[m,p],[n,a]))&&s(a,p,f(c)),m+=e,p+=o;return a}function kr(r,n,s,f,l,d,m,p){var c,v;return e(n)&&(c=t(u(n))),e(f)&&(v=i(u(f))),c||v?function(r,n,e,t,i,a,o,u,s,f){return Sr(r,n,e,M(r,e),t,i,a,M(r,a),o,u,s,f)}(r,n,s,c=c||a(u(n)),f,l,v=v||o(u(f)),d,m,p):function(r,n,e,t,i,a,o,u){return Vr(r,n,e,M(r,e),t,i,M(r,i),a,o,u)}(r,n,s,f,l,d,m,p)}function Fr(r,n,e,t,i,a,o,u,s,f,l,d,m){var p,c,v,g,h;if(r<=0)return u;for(c=[t,o,f],v=[n,i,u],p=[0,0],h=0;h<r;h++)p[0]=n[c[0]],p[1]=i[c[1]],void 0!==(g=d.call(m,p,h,c,v))&&(u[c[2]]=l(g[0],g[1])),c[0]+=e,c[1]+=a,c[2]+=s;return u}function Ur(r,n,e,t,i,a,o,u,s,f,l,d,m,p,c,v){var g,h,y,b,w;if(r<=0)return f;for(h=[t,u,d],y=[n,a,f],g=[0,0],w=0;w<r;w++)g[0]=i(n,h[0]),g[1]=s(a,h[1]),void 0!==(b=c.call(v,g,w,h,y))&&m(f,h[2],p(b[0],b[1])),h[0]+=e,h[1]+=o,h[2]+=l;return f}function Or(r,n,s,f,l,d,m,p,c,v){var g,h,y;return e(n)&&(g=t(u(n))),e(f)&&(h=t(u(f))),e(d)&&(y=i(u(d))),g||h||y?function(r,n,e,t,i,a,o,u,s,f,l,d,m){return Ur(r,n,e,M(r,e),t,i,a,M(r,a),o,u,s,M(r,s),f,l,d,m)}(r,n,s,g=g||a(u(n)),f,l,h=h||a(u(f)),d,m,y=y||o(u(d)),p,c,v):function(r,n,e,t,i,a,o,u,s,f){return Fr(r,n,e,M(r,e),t,i,M(r,i),a,o,M(r,o),u,s,f)}(r,n,s,f,l,d,m,p,c,v)}function Br(r,n,e,t,i){var a,o,u,s,f,l,d,m,p,c,v;if(!((c=n[0])<=0))for(s=t[0],f=t[1],l=t[2],a=e[0],o=e[1],u=e[2],d=r[0],m=r[1],p=r[2],v=0;v<c;v++)0===m[f]&&(p[l]=i(d[s])),s+=a,f+=o,l+=u}function Ir(r,n,e,t,i,a){var o,u,s,f,l,d,m,p,c,v,g,h,y,b;if(!((y=n[0])<=0))for(m=t[0],p=t[1],c=t[2],f=e[0],l=e[1],d=e[2],v=r[0],g=r[1],h=r[2],o=i[0],u=i[1],s=i[2],b=0;b<y;b++)0===u(g,p)&&s(h,c,a(o(v,m))),m+=f,p+=l,c+=d}function Rr(r,n,s,f){var l,d,m,p,c,v;return p=r[0],e(p)&&(l=t(u(p))),c=r[1],e(c)&&(d=t(u(c))),v=r[2],e(v)&&(m=i(u(v))),l||d||m?function(r,n,e,t,i){var a;return Ir(r,n,e,[M(a=n[0],e[0]),M(a,e[1]),M(a,e[2])],t,i)}(r,n,s,[l=l||a(u(p)),d=d||a(u(c)),m=m||o(u(v))],f):function(r,n,e,t){var i;return Br(r,n,e,[M(i=n[0],e[0]),M(i,e[1]),M(i,e[2])],t)}(r,n,s,f)}n(gr,"ndarray",vr),n(yr,"ndarray",hr),n(wr,"ndarray",br),n(xr,"ndarray",jr),n(Tr,"ndarray",Er),n(kr,"ndarray",(function(r,n,s,f,l,d,m,p,c,v){var g,h;return e(n)&&(g=t(u(n))),e(l)&&(h=i(u(l))),g||h?Sr(r,n,s,f,g=g||a(u(n)),l,d,m,h=h||o(u(l)),p,c,v):Vr(r,n,s,f,l,d,m,p,c,v)})),n(Or,"ndarray",(function(r,n,s,f,l,d,m,p,c,v,g,h,y){var b,w,j;return e(n)&&(b=t(u(n))),e(l)&&(w=t(u(l))),e(p)&&(j=i(u(p))),b||w||j?Ur(r,n,s,f,b=b||a(u(n)),l,d,m,w=w||a(u(l)),p,c,v,j=j||o(u(p)),g,h,y):Fr(r,n,s,f,l,d,m,p,c,v,g,h,y)})),n(Rr,"ndarray",(function(r,n,s,f,l){var d,m,p,c,v,g;return c=r[0],e(c)&&(d=t(u(c))),v=r[1],e(v)&&(m=t(u(v))),g=r[2],e(g)&&(p=i(u(g))),d||m||p?Ir(r,n,s,f,[d=d||a(u(c)),m=m||a(u(v)),p=p||o(u(g))],l):Br(r,n,s,f,l)}));var _r=K("complex64"),Dr=K("complex128"),Mr=K("bool");function Ar(r,n){if(!s(r))throw new TypeError(g("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(g("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,t,i,a,o,u,s,l,d,m){var p,c;if(!f(i)||!f(d)||!f(u))return n(e,t,i,a,o,u,s,l,d,m),d;if(t=K(t),l=K(l),o=K(o),null===t||null===l||null===o)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");p=t===_r?Q(i,0):t===Dr?W(i,0):t===Mr?X(i,0):i;c=l===_r?Q(d,0):l===Dr?W(d,0):l===Mr?X(d,0):d;return r(e,t,p,a,o,u,s,l,c,m),d}}var Cr=K("complex64"),Pr=K("complex128"),zr=K("bool");function Lr(r,n){var e,t,i,a,o,u,s;for(t=r.length,i=n.length,e=[],s=0,o=0;o<t&&!(s>=i);o++)for(a=r[o],u=s;u<i;u++)if(a===n[u]){s=u+1,e.push(a);break}return e}function Nr(r){var n,e,t;for(n=[],t=0;t<r.length;t++){if(null===(e=ur(r[t])))return new TypeError(g("invalid argument. Must provide recognized data types. Unable to resolve a data type string. Value: `%s`.",r[t]));n.push(e)}return n}n(Ar,"ndarray",(function(r,n){if(!s(r))throw new TypeError(g("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(g("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,t,i,a,o,u,s,l,d,m,p,c,v){var y,b,w;if(!f(i)||!f(p)||!f(s))return n(e,t,i,a,o,u,s,l,d,m,p,c,v),p;if(t=K(t),m=K(m),u=K(u),null===t||null===m||null===u)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!h(o))throw new TypeError(g("invalid argument. Input array offset must be a nonnegative integer. Value: `%s`.",o));if(!h(v))throw new TypeError(g("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",v));if(!h(d))throw new TypeError(g("invalid argument. Mask array offset must be a nonnegative integer. Value: `%s`.",d));o=tr(e,a,o),v=tr(e,c,v),d=tr(e,l,d),b=t===Cr?Q(i,o):t===Pr?W(i,o):t===zr?X(i,o):er(i,o);w=m===Cr?Q(p,v):m===Pr?W(p,v):m===zr?X(p,v):er(p,v);return y=er(s,d),r(e,t,b,a,u,y,l,m,w,c),p}}));var Yr="complex64",qr="complex128",Gr={complex64:S,complex128:k};function Hr(r,n,e){return e===qr?n===Yr||n===qr?r[qr]:F(r.default,1,Gr[e]):e===Yr?n===Yr?r[Yr]:n===qr?r[qr]:F(r.default,1,Gr[e]):"generic"===e?n===qr?r[qr]:n===Yr?r[Yr]:r.default:r.default}function Jr(r,n,e,t,i){var a,o,u,s,f;if(!((s=n[0])<=0))for(o=t[0],a=e[0],u=r[0],f=0;f<s;f++)u[o]=i(),o+=a}function Kr(r,n,e,t,i,a){var o,u,s,f,l,d;if(!((l=n[0])<=0))for(s=t[0],u=e[0],f=r[0],o=i[0],d=0;d<l;d++)o(f,s,a()),s+=u}function Qr(r,n,t,a){var s,f;return f=r[0],e(f)&&(s=i(u(f))),s?function(r,n,e,t,i){return Kr(r,n,e,[M(n[0],e[0])],t,i)}(r,n,t,[s=s||o(u(f))],a):function(r,n,e,t){return Jr(r,n,e,[M(n[0],e[0])],t)}(r,n,t,a)}n(Qr,"ndarray",(function(r,n,t,a,s){var f,l;return l=r[0],e(l)&&(f=i(u(l))),f?Kr(r,n,t,a,[f=f||o(u(l))],s):Jr(r,n,t,a,s)}));var Wr=K("complex64"),Xr=K("complex128"),Zr=K("bool");function $r(r,n){if(!s(r))throw new TypeError(g("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(g("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,t,i,a){var o;if(!f(i))return n(e,t,i,a),i;if(null===(t=K(t)))throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");o=t===Wr?Q(i,0):t===Xr?W(i,0):t===Zr?X(i,0):i;return r(e,t,o,a),i}}var rn=K("complex64"),nn=K("complex128"),en=K("bool");function tn(r,n,e,t,i){var a,o,u,s,f,l,d,m,p,c,v,g,h,y,b,w,j;if(!((w=n[0])<=0))for(l=t[0],d=t[1],m=t[2],p=t[3],c=t[4],a=e[0],o=e[1],u=e[2],s=e[3],f=e[4],v=r[0],g=r[1],h=r[2],y=r[3],b=r[4],j=0;j<w;j++)b[c]=i(v[l],g[d],h[m],y[p]),l+=a,d+=o,m+=u,p+=s,c+=f}function an(r,n,e,t){var i;return tn(r,n,e,[M(i=n[0],e[0]),M(i,e[1]),M(i,e[2]),M(i,e[3]),M(i,e[4])],t)}function on(r,n,e,t,i){var a,o,u,s,f,l,d,m,p,c,v,g,h,y,b,w,j,x,E,T;if(!((E=n[0])<=0))for(d=t[0],m=t[1],p=t[2],c=t[3],v=t[4],g=t[5],a=e[0],o=e[1],u=e[2],s=e[3],f=e[4],l=e[5],h=r[0],y=r[1],b=r[2],w=r[3],j=r[4],x=r[5],T=0;T<E;T++)x[g]=i(h[d],y[m],b[p],w[c],j[v]),d+=a,m+=o,p+=u,c+=s,v+=f,g+=l}function un(r,n,e,t){var i;return on(r,n,e,[M(i=n[0],e[0]),M(i,e[1]),M(i,e[2]),M(i,e[3]),M(i,e[4]),M(i,e[5])],t)}function sn(r,n,e,t,i,a,o,u){var s,f,l;if(r<=0)return i;for(s=t,f=o,l=0;l<r;l++)i[f]=u(n[s]),s+=e,f+=a;return i}function fn(r,n,e,t,i,a){return sn(r,n,e,M(r,e),t,i,M(r,i),a)}function ln(r,n,e,t,i,a,o,u,s,f,l){var d,m,p,c;if(r<=0)return u;for(d=t,m=o,p=f,c=0;c<r;c++)u[p]=l(n[d],i[m]),d+=e,m+=a,p+=s;return u}function dn(r,n,e,t,i,a,o,u){return ln(r,n,e,M(r,e),t,i,M(r,i),a,o,M(r,o),u)}function mn(r,n,e,t,i,a,o,u,s,f,l){var d,m,p,c;if(r<=0)return u;for(d=t,m=o,p=f,c=0;c<r;c++)0===i[m]&&(u[p]=l(n[d])),d+=e,m+=a,p+=s;return u}function pn(r,n,e,t,i,a,o,u){return mn(r,n,e,M(r,e),t,i,M(r,i),a,o,M(r,o),u)}function cn(r,n,e,t,i,a,o,u,s,f,l,d,m,p){var c,v,g,h,y;if(r<=0)return l;for(c=t,v=o,g=m,h=f,y=0;y<r;y++)0===u[h]&&(l[g]=p(n[c],i[v])),c+=e,v+=a,g+=d,h+=s;return l}function vn(r,n,e,t,i,a,o,u,s,f){return cn(r,n,e,M(r,e),t,i,M(r,i),a,o,M(r,o),u,s,M(r,s),f)}function gn(r,n,e,t,i){var a,o,u,s,f,l,d,m,p,c,v,g,h,y;if(!((h=n[0])<=0))for(f=t[0],l=t[1],d=t[2],m=t[3],a=e[0],o=e[1],u=e[2],s=e[3],p=r[0],c=r[1],v=r[2],g=r[3],y=0;y<h;y++)g[m]=i(p[f],c[l],v[d]),f+=a,l+=o,d+=u,m+=s}function hn(r,n,e,t){var i;return gn(r,n,e,[M(i=n[0],e[0]),M(i,e[1]),M(i,e[2]),M(i,e[3])],t)}function yn(r,n,e,t,i){var a,o,u,s,f,l,d,m;if(!((d=n[0])<=0))for(u=t[0],s=t[1],a=e[0],o=e[1],f=r[0],l=r[1],m=0;m<d;m++)l[s]=i(f[u]),u+=a,s+=o}function bn(r,n,e,t,i,a){var o,u,s,f,l,d,m,p,c,v;if(!((c=n[0])<=0))for(l=t[0],d=t[1],s=e[0],f=e[1],m=r[0],p=r[1],o=i[0],u=i[1],v=0;v<c;v++)u(p,d,a(o(m,l))),l+=s,d+=f}function wn(r,n,s,f){var l,d,m,p;return m=r[0],e(m)&&(l=t(u(m))),p=r[1],e(p)&&(d=i(u(p))),l||d?function(r,n,e,t,i){var a;return bn(r,n,e,[M(a=n[0],e[0]),M(a,e[1])],t,i)}(r,n,s,[l=l||a(u(m)),d=d||o(u(p))],f):function(r,n,e,t){var i;return yn(r,n,e,[M(i=n[0],e[0]),M(i,e[1])],t)}(r,n,s,f)}n($r,"ndarray",(function(r,n){if(!s(r))throw new TypeError(g("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(g("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,t,i,a,o){var u;if(!f(i))return n(e,t,i,a,o),i;if(null===(t=K(t)))throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!h(o))throw new TypeError(g("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",o));o=tr(e,a,o),u=t===rn?Q(i,o):t===nn?W(i,o):t===en?X(i,o):er(i,o);return r(e,t,u,a),i}})),n(an,"ndarray",tn),n(un,"ndarray",on),n(fn,"ndarray",sn),n(dn,"ndarray",ln),n(pn,"ndarray",mn),n(vn,"ndarray",cn),n(hn,"ndarray",gn),n(wn,"ndarray",(function(r,n,s,f,l){var d,m,p,c;return p=r[0],e(p)&&(d=t(u(p))),c=r[1],e(c)&&(m=i(u(c))),d||m?bn(r,n,s,f,[d=d||a(u(p)),m=m||o(u(c))],l):yn(r,n,s,f,l)}));var jn=K("complex64"),xn=K("complex128"),En=K("bool");function Tn(r,n){if(!s(r))throw new TypeError(g("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(g("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,t,i,a,o,u,s){var l,d;if(!f(i)||!f(u))return n(e,t,i,a,o,u,s),u;if(t=K(t),o=K(o),null===t||null===o)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");l=t===jn?Q(i,0):t===xn?W(i,0):t===En?X(i,0):i;d=o===jn?Q(u,0):o===xn?W(u,0):o===En?X(u,0):u;return r(e,t,l,a,o,d,s),u}}var Vn=K("complex64"),Sn=K("complex128"),kn=K("bool");function Fn(r,n,e,t,i,a,o){var u,s,f,l,d,m,p,c,v;if(!((p=n[0])<=0))for(f=t[0],l=t[1],u=e[0],s=e[1],d=r[0],m=r[1],v=0;v<p;v++)void 0!==(c=a.call(o,d[f],v,[f,l],[d,m]))&&(m[l]=i(c)),f+=u,l+=s}function Un(r,n,e,t,i,a,o,u){var s,f,l,d,m,p,c,v,g,h,y;if(!((g=n[0])<=0))for(m=t[0],p=t[1],l=e[0],d=e[1],c=r[0],v=r[1],s=i[0],f=i[1],y=0;y<g;y++)void 0!==(h=o.call(u,s(c,m),y,[m,p],[c,v]))&&f(v,p,a(h)),m+=l,p+=d}function On(r,n,s,f,l){var d,m,p,c,v;return arguments.length>5&&(d=arguments[5]),c=r[0],e(c)&&(m=t(u(c))),v=r[1],e(v)&&(p=i(u(v))),m||p?function(r,n,e,t,i,a,o){var u;return Un(r,n,e,[M(u=n[0],e[0]),M(u,e[1])],t,i,a,o)}(r,n,s,[m=m||a(u(c)),p=p||o(u(v))],f,l,d):function(r,n,e,t,i,a){var o;return Fn(r,n,e,[M(o=n[0],e[0]),M(o,e[1])],t,i,a)}(r,n,s,f,l,d)}function Bn(r,n){var e,t,i,a,o,u,s;for(t=r.length,i=n.length,e=[],s=0,o=0;o<t&&!(s>=i);o++)for(a=r[o],u=s;u<i;u++)if(a===n[u]){s=u+1,e.push(a);break}return e}function In(r){var n,e,t;for(n=[],t=0;t<r.length;t++){if(null===(e=ur(r[t])))return new TypeError(g("invalid argument. Must provide recognized data types. Unable to resolve a data type string. Value: `%s`.",r[t]));n.push(e)}return n}n(Tn,"ndarray",(function(r,n){if(!s(r))throw new TypeError(g("invalid argument. First argument must be a function. Value: `%s`.",r));if(!s(n))throw new TypeError(g("invalid argument. Second argument must be a function. Value: `%s`.",n));return function(e,t,i,a,o,u,s,l,d){var m,p;if(!f(i)||!f(s))return n(e,t,i,a,o,u,s,l,d),s;if(t=K(t),u=K(u),null===t||null===u)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");if(!h(o))throw new TypeError(g("invalid argument. Input array offset must be a nonnegative integer. Value: `%s`.",o));if(!h(d))throw new TypeError(g("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",d));o=tr(e,a,o),d=tr(e,l,d),m=t===Vn?Q(i,o):t===Sn?W(i,o):t===kn?X(i,o):er(i,o);p=u===Vn?Q(s,d):u===Sn?W(s,d):u===kn?X(s,d):er(s,d);return r(e,t,m,a,u,p,l),s}})),n(On,"ndarray",(function(r,n,s,f,l,d){var m,p,c,v,g;return arguments.length>6&&(m=arguments[6]),v=r[0],e(v)&&(p=t(u(v))),g=r[1],e(g)&&(c=i(u(g))),p||c?Un(r,n,s,f,[p=p||a(u(v)),c=c||o(u(g))],l,d,m):Fn(r,n,s,f,l,d,m)}));var Rn="complex64",_n="complex128",Dn={complex64:w,complex128:j};function Mn(r,n,e){return e===_n?n===Rn||n===_n?r[_n]:F(r.default,1,Dn[e]):e===Rn?n===Rn?r[Rn]:n===_n?r[_n]:F(r.default,1,Dn[e]):"generic"===e?n===_n?r[_n]:n===Rn?r[Rn]:r.default:r.default}function An(r,n,e,t,i,a,o,u){var s,f,l;if(r<=0)return i;for(s=t,f=o,l=0;l<r;l++)i.set(u(n.get(s)),f),s+=e,f+=a;return i}function Cn(r,n,e,t,i,a){return An(r,n,e,M(r,e),t,i,M(r,i),a)}n(Cn,"ndarray",An);var Pn={};function zn(r,n,e,t,i,a){var o,u,f,l,d,m;if(s(r))m=r;else if(!R(r))throw new TypeError(g("invalid argument. First argument must be either a function or an array of functions. Value: `%s`.",r));if(!_(n))throw new TypeError(g("invalid argument. Second argument must be an array-like object. Value: `%s`.",n));if(!_(e)&&null!==e)throw new TypeError(g("invalid argument. Third argument must be an array-like object or null. Value: `%s`.",e));if(!B(t))throw new TypeError(g("invalid argument. Fourth argument must be a positive integer. Value: `%s`.",t));if(!h(i))throw new TypeError(g("invalid argument. Fifth argument must be a nonnegative integer. Value: `%s`.",i));if(!h(a))throw new TypeError(g("invalid argument. Sixth argument must be a nonnegative integer. Value: `%s`.",a));if(0===(f=i+a))throw new Error("invalid arguments. Interface must accept at least one strided input and/or output array. Based on the provided arguments, `nin+nout` equals `0`.");if(m){if(l=n.length/f,!I(l))throw new Error("invalid argument. Unexpected number of types. A type must be specified for each strided input and output array for each provided strided array function.")}else if(l=r.length,n.length!==l*f)throw new Error("invalid argument. Unexpected number of types. A type must be specified for each strided input and output array for each provided strided array function.");if(e&&e.length!==l)throw new Error("invalid argument. The third argument must have the same number of elements as the first argument.");if(3*f+1===t)u=!1;else{if(4*f+1!==t)throw new Error("invalid argument. Fourth argument is incompatible with the number of strided input and output arrays.");u=!0}return d=i*(o=u?4:3)+1,function(){var s,p,c,v,y,b,w,j,x,E,T,V;if(b=arguments.length,b!==t){if(b<t)throw new Error("invalid invocation. Insufficient arguments.");throw new Error("invalid invocation. Too many arguments.")}if(j=arguments[0],!I(j))throw new TypeError(g("invalid argument. First argument must be an integer. Value: `%s`.",j));for(y=[j],v=[],T=1;T<t;T+=o)v.push(arguments[T]);for(s=[],T=3;T<t;T+=o){if(!I(x=arguments[T]))throw T<d?new TypeError(g("invalid argument. Input array stride must be an integer. Value: `%s`.",x)):new TypeError(g("invalid argument. Output array stride must be an integer. Value: `%s`.",x));s.push(x)}if(u)for(p=[],T=4;T<t;T+=o){if(!h(x=arguments[T]))throw T<d?new TypeError(g("invalid argument. Input array offset must be a nonnegative integer. Value: `%s`.",x)):new TypeError(g("invalid argument. Output array offset must be a nonnegative integer. Value: `%s`.",x));p.push(x)}for(c=[],T=2;T<t;T+=o){if(!_(x=arguments[T]))throw T<d?new TypeError(g("invalid argument. Input array must be an array-like object. Value: `%s`.",x)):new TypeError(g("invalid argument. Output array must be an array-like object. Value: `%s`.",x));if(V=(T-2)/o,u){if(w=p[V]+(j-1)*s[V],j>0&&(w<0||w>=x.length))throw T<d?new RangeError("invalid argument. Input array has insufficient elements based on the associated stride and the number of indexed elements."):new RangeError("invalid argument. Output array has insufficient elements based on the associated stride and the number of indexed elements.")}else if((j-1)*D(s[V])>=x.length)throw T<d?new RangeError("invalid argument. Input array has insufficient elements based on the associated stride and the number of indexed elements."):new RangeError("invalid argument. Output array has insufficient elements based on the associated stride and the number of indexed elements.");c.push(x)}if(w=function(r,n,e,t,i,a,o,u,s){var f,l,d,m;for(f=a,d=0;d<r;d++){for(l=s,m=0;m<n&&e[f+m*i]===o[l];m++)l+=u;if(m===n)return d;f+=t}return-1}(l,f,n,f,1,0,v,1,0),w<0)throw new TypeError("invalid arguments. Unable to resolve a strided array function supporting the provided array argument data types.");E=m||r[w];e?u?E(c,y,s,p,e[w]):E(c,y,s,e[w]):u?E(c,y,s,p):E(c,y,s);if(1===a)return c[f-1];if(0===a)return;return c.slice(i)}}r(Pn,"binary",P),r(Pn,"binaryAddonDispatch",nr),r(Pn,"binaryDtypeSignatures",(function(r,n,e,t){var i,a,o,u,s,f,l,d,m,p,c,v,g,h,w,j,x;if(o=arguments.length>3?t:{},(f=fr(r))instanceof Error)throw f;if(n===r)l=f;else if((l=fr(n))instanceof Error)throw l;if(e===r)d=f;else if(e===n)d=l;else if((d=fr(e))instanceof Error)throw d;for(d.sort(),i={},g=f.length,h=l.length,s=[],w=0;w<g;w++)for(m=f[w],j=0;j<h;j++)if(p=l[j],-1!==(c=y(m,p))&&null!==c)for(lr(d,c)&&s.push(m,p,c),void 0===(a=i[c])&&(a=sr(d,(a=b(c)).sort()),i[c]=a),x=0;x<a.length;x++)(v=a[x])!==c&&s.push(m,p,v);if(o.enums){for(u=[],w=0;w<s.length;w++)u.push(K(s[w]));s=u}return s})),r(Pn,"binarySignatureCallbacks",(function(r,n){var e,t,i,a,o;for(e=[],o=0;o<n.length;o+=3)t=ur(n[o]),i=ur(n[o+1]),a=ur(n[o+2]),e.push(cr(r,t,i,a));return e})),r(Pn,"cmap",gr),r(Pn,"dmap",yr),r(Pn,"dmap2",wr),r(Pn,"dmskmap",xr),r(Pn,"dmskmap2",Tr),r(Pn,"dtypeEnum2Str",G),r(Pn,"dtypeResolveEnum",K),r(Pn,"dtypeResolveStr",ur),r(Pn,"dtypeStr2Enum",J),r(Pn,"mapBy",kr),r(Pn,"mapBy2",Or),r(Pn,"maxViewBufferIndex",(function(r,n,e){return r>0&&n>0&&(e+=(r-1)*n),e})),r(Pn,"metaDataProps",(function(r,e,t,i){return n(t,"nargs",i?r.nargs+r.nin+r.nout:r.nargs),n(t,"nin",r.nin),n(t,"nout",r.nout),E(t,"types",(function(){return T(e,r.nin,r.nout)})),t})),r(Pn,"minViewBufferIndex",tr),r(Pn,"mskunary",Rr),r(Pn,"mskunaryAddonDispatch",Ar),r(Pn,"mskunaryDtypeSignatures",(function(r,n,e){var t,i,a,o,u,s,f,l,d,m;if(i=arguments.length>2?e:{},(u=Nr(r))instanceof Error)throw u;if(n===r)s=u;else if((s=Nr(n))instanceof Error)throw s;for(s.sort(),l=u.length,o=[],d=0;d<l;d++)if(f=u[d],null!==(t=V(f)))for(t=Lr(s,t.sort()),m=0;m<t.length;m++)o.push(f,"uint8",t[m]);if(i.enums){for(a=[],d=0;d<o.length;d++)a.push(K(o[d]));o=a}return o})),r(Pn,"mskunarySignatureCallbacks",(function(r,n){var e,t,i,a;for(e=[],a=0;a<n.length;a+=3)t=ur(n[a]),i=ur(n[a+2]),e.push(Hr(r,t,i));return e})),r(Pn,"nullary",Qr),r(Pn,"nullaryAddonDispatch",$r),r(Pn,"offsetView",er),r(Pn,"quaternary",an),r(Pn,"quinary",un),r(Pn,"reinterpretBoolean",X),r(Pn,"reinterpretComplex",(function(r,n){if(U(r))return W(r,n);if(O(r))return Q(r,n);throw new TypeError(g("invalid argument. First argument must be a complex-valued floating-point array. Value: `%s`.",r))})),r(Pn,"reinterpretComplex64",Q),r(Pn,"reinterpretComplex128",W),r(Pn,"smap",fn),r(Pn,"smap2",dn),r(Pn,"smskmap",pn),r(Pn,"smskmap2",vn),r(Pn,"stride2offset",M),r(Pn,"ternary",hn),r(Pn,"unary",wn),r(Pn,"unaryAddonDispatch",Tn),r(Pn,"unaryBy",On),r(Pn,"unaryDtypeSignatures",(function(r,n,e){var t,i,a,o,u,s,f,l,d,m;if(i=arguments.length>2?e:{},(u=In(r))instanceof Error)throw u;if(n===r)s=u;else if((s=In(n))instanceof Error)throw s;for(s.sort(),l=u.length,o=[],d=0;d<l;d++)if(f=u[d],null!==(t=b(f)))for(t=Bn(s,t.sort()),m=0;m<t.length;m++)o.push(f,t[m]);if(i.enums){for(a=[],d=0;d<o.length;d++)a.push(K(o[d]));o=a}return o})),r(Pn,"unarySignatureCallbacks",(function(r,n){var e,t,i,a;for(e=[],a=0;a<n.length;a+=2)t=ur(n[a]),i=ur(n[a+1]),e.push(Mn(r,t,i));return e})),r(Pn,"zmap",Cn);var Ln={};r(Ln,"base",Pn),r(Ln,"dispatch",zn),r(Ln,"dtypes",L);export{Pn as base,Ln as default,zn as dispatch,L as dtypes};
//# sourceMappingURL=index.mjs.map
